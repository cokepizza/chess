{"version":3,"sources":["components/common/Header.js","lib/websocket/websocket.js","lib/createRequestThunk.js","lib/storage/storage.js","modules/auth.js","lib/api/auth.js","containers/common/HeaderContainer.js","lib/hook/useAsync.js","components/main/MainLayout.js","containers/main/MainLayoutContainer.js","pages/MainPage.js","components/auth/AuthForm.js","containers/auth/LoginContainer.js","pages/LoginPage.js","containers/auth/RegisterContainer.js","pages/RegisterPage.js","lib/base/board.js","lib/base/rules.js","lib/base/validation.js","modules/canvas.js","lib/api/canvas.js","lib/base/pieceConverter.js","components/gameplay/Canvas.js","containers/gameplay/CanvasContainer.js","components/game/CanvasWrapper.js","containers/game/CanvasWapperContainer.js","components/game/GridBox.js","containers/game/GridBoxContainer.js","components/game/GridLayout.js","containers/game/GridLayoutContainer.js","components/game/Summary.js","containers/game/SummaryContainer.js","containers/HOC/CheckOutsideOfComponent.js","components/game/Selection.js","modules/create.js","containers/game/SelectionContainer.js","components/game/Slider.js","containers/game/SliderContainer.js","components/game/Icon.js","containers/game/IconContainer.js","components/game/Creation.js","modules/games.js","lib/api/games.js","containers/game/CreationContainer.js","components/game/GameLayout.js","containers/game/GameLayoutContainer.js","pages/GamePage.js","modules/chat.js","lib/api/chat.js","components/gameplay/Chat.js","containers/gameplay/ChatContainer.js","components/gameplay/Timer.js","containers/gameplay/TimerContainer.js","components/gameplay/Status.js","containers/gameplay/StatusContainer.js","components/gameplay/PieceMoveList.js","containers/gameplay/PieceMoveListContainer.js","components/gameplay/TimeLine.js","containers/gameplay/TimeLineContainer.js","components/gameplay/UndoRedo.js","containers/gameplay/UndoRedoContainer.js","components/gameplay/Util.js","modules/record.js","containers/gameplay/UtilContainer.js","components/gameplay/Record.js","containers/gameplay/RecordContainer.js","components/gameplay/GamePlayLayout.js","modules/game.js","containers/gameplay/GamePlayLayoutContainer.js","pages/GamePlayPage.js","pages/GamePlayCanvasPage.js","components/community/testItems.js","components/community/CommunityTableRow.js","components/community/CommunityHeader.js","components/community/CommunityFooter.js","components/community/CommunityContent.js","components/community/CommunityLayout.js","containers/community/CommunityLayoutContainer.js","pages/CommunityPage.js","App.js","modules/index.js","serviceWorker.js","components/common/FixSize.js","index.js"],"names":["HeaderBlock","styled","div","titleStyle","css","TitleBlock","Link","TitleFadeBlock","ControllBlock","GroupBlock","TabBlock","TabLinkBlock","props","hidden","Tab","to","children","AuthBlock","UserWelcomeBlock","React","memo","username","onRecord","onLogout","onLogin","session","auth","nickname","onClick","createEventChannel","connectNamespace","io","eventChannel","emit","on","socket","type","id","message","close","params","url","initializeSocket","initializeValue","changeValue","updateValue","query","console","dir","SocketIo","reconnection","secure","call","channel","take","put","cancelled","createRequestActionTypes","createRequestThunk","request","SUCCESS","FAILURE","dispatch","a","async","response","payload","data","error","setLocalStorage","rest","Object","keys","forEach","key","localStorage","setItem","JSON","stringify","e","getLocalStorage","parse","getItem","removeLocalStorage","removeItem","clearLocalStorage","clear","connectWebsocketSaga","authSaga","CONNECT_WEBSOCKET","DISCONNECT_WEBSOCKET","connectWebsocket","createAction","disconnectWebsocket","clearValue","SET_SESSION","SET_SESSION_SUCCESS","SET_SESSION_FAILURE","setSessionThunk","axios","get","LOGIN","LOGIN_SUCCESS","LOGIN_FAILURE","REGISTER","REGISTER_SUCCESS","REGISTER_FAILURE","LOGOUT","LOGOUT_SUCCESS","LOGOUT_FAILURE","CHECK","CHECK_SUCCESS","CHECK_FAILURE","loginThunk","password","post","registerThunk","logoutThunk","checkThunk","changeField","clearField","clearSpecificField","action","fork","socketTask","cancel","takeEvery","initialState","tempAuth","authError","login","register","passwordConfirm","handleActions","state","form","value","produce","draft","withRouter","history","useSelector","useDispatch","useCallback","getState","alert","push","reducer","loading","Error","useAsync","callback","deps","useReducer","fetchData","useEffect","MainLayoutBlock","MainLayout","MainLayoutContainer","MainPage","AuthFrameBlock","AuthFormBlock","InputFrameBlock","InputFormBlock","blink","inputStyle","EmailInputBlock","input","PasswordInputBlock","OptionFormBlock","SaveInputFormBlock","SaveInputBlock","SaveInputTextBlock","ForgetBlock","SubmitFrameBlock","SubmitBlock","button","CreateFormBlock","CreateBlock","CreateButtonBlock","ErrorBlock","onSubmit","onChange","onRegister","ref","useRef","tag","current","focus","autoComplete","autoCorrect","autoCapitalize","spellCheck","bind","count","Provider","style","width","height","cursor","name","placeholder","el","useState","setError","target","prevState","preventDefault","nextError","reduce","acc","filter","param","schema","Joi","object","string","max","email","minDomainAtoms","required","min","result","validate","abortEarly","details","detail","path","length","errorMention","LoginPage","any","valid","RegisterPage","board","covered","rules","pawn","move","dy","dx","except","piece","y","x","owner","knight","king","enemy","dirty","coveredAxisBundle","checkPlayersEveryMove","i","axis","bishop","rook","queen","player","castling","j","coveredAxis","checkCovered","inform","cur","flatMap","counter","coveredArr","canvasSaga","initializeBlocked","changeBlocked","SET_MOVE_PIECE","SET_MOVE_PIECE_SUCCESS","SET_MOVE_PIECE_FAILURE","setMovePieceThunk","updateReverseBoard","prevReverseBoard","nextOriginBoard","nextReverseBoard","reverseBoard","_","cloneDeep","reverse","row","makeReverseBoard","nextPiece","prevPiece","every","changeValueThunk","prev","next","canvas","turn","game","role","blocked","cell","clearBoard","genClearBoard","tracked","pieceStore","clicked","arr","leng","pass","popedCell","newCell","splice","reversed","pieceMapper","GiChessPawn","GiChessKing","GiChessQueen","GiChessBishop","GiChessKnight","GiChessRook","GiPlainCircle","playerMapper","color","pieceConverter","cellNum","coveredCanvas","Component","capturedObject","opacity","styleObject","CanvasBlock","CanvasRowBlock","CanvasCellBlock","cellSize","CanvasRow","onClickCell","map","CanvasCell","prevProps","nextProps","CanvasContentBlock","CanvasContent","CanvasContainer","record","cy","cx","reversal","clickPieceThunk","servedBoard","CanvasWrapperBlock","UnClickableBlock","CanvasWrapperContainer","gameId","Promise","resolve","then","GridBoxBlock","BoxTitleBlock","BoxContentBlock","onMouseEnter","onMouseLeave","participant","setCanvas","GridRowBlock","GridLayoutFrameBlock","GridLayoutHiddenBlock","GridLayoutBlock","games","onGameClick","list","gridArr","rowSize","Math","floor","position","top","left","zIndex","GridLayoutContainer","SummaryContainer","CheckOutsideOfComponent","componentState","setComponentState","checkClickOutside","contains","document","addEventListener","removeEventListener","SelectionFrameBlock","NameBlock","SelectionBlock","SelecitonToolTipFrameBlock","SelectionToolTipBlock","kind","reference","onClickSelection","onClickOption","optionName","mapList","mode","modeList","defaultTime","extraTime","config","step","defaultValue","SelecitonContainer","create","SliderFrameBlock","SliderBoxBlock","SliderBlock","ValueBlock","substring","SliderContainer","IconBlock","checked","styleObj","IconContainer","white","black","CreationBlock","SelectionBundleBlock","SliderBundleBlock","IconBundleBlock","ConfirmFrameBlock","ConfirmBlock","SelectionContainer","gamesSaga","CREATE_GAME","CREATE_GAME_SUCCESS","CREATE_GAME_FAILURE","createGameThunk","GameLayoutBlock","sideBlockStyle","LeftSideBlock","RightSideBlock","GameLayoutContainer","GamePage","chatSaga","changeTextfield","initializeTextfield","SEND_MESSAGE","SEND_MESSAGE_SUCCESS","SEND_MESSAGE_FAILURE","sendMessageThunk","messages","text","ChatSubmitBlock","ChatFrameBlock","ChatHiddenBlock","ChatBlock","ChatFormBlock","ChatInputBlock","ChatButtonBlock","MessageBlock","BalloonBlock","Balloon","ballonBlock","Message","myName","scrollTop","scrollHeight","ChatContainer","chat","TimerBlock","time","TimeSliceBlock","ColonBlock","timeConverter","timeSlice","convertedTime","String","Timer","minute","second","undefined","TimerContainer","whiteTime","blackTime","start","order","StatusBlock","beneath","light","iconStyle","display","justifyContent","alignItems","StatusContainer","blackNick","whiteNick","participantSet","Set","has","PieceMoveListHiddenBlock","PieceMoveListBlock","PieceMoveBlock","moveConverter","fromCharCode","MoveBlock","TextBlock","IndexBlock","PieceMove","index","onClickBlock","NextComponent","nextStyle","PrevComponent","prevStyle","pieceMove","PieceMoveListContainer","TimeLineBlock","TimeLineContainer","whiteRatio","blackRatio","UndoRedoBlock","ButtonBlock","buttonStyle","backgroundColor","UndoRedoContainer","UtilBlock","onReverse","recordSaga","changeReverse","updateValueThunk","newRecord","startTime","endTime","blackMaxTime","whiteMaxTime","UtilContainer","RecordBlock","RecordContainer","GamePlayLayoutBlock","gameSaga","GamePlayLayoutContainer","disconnectAuthWebsocket","disconnectGameWebsocket","disconnectChatWebsocket","disconnectCanvasWebsocket","disconnectRecordWebsocket","clearAuthValue","clearGameValue","connectAuthWebsocket","connectGameWebsocket","connectChatWebsocket","connectCanvasWebsocket","connectRecordWebsocket","match","GamePlayCanvasPage","title","comments","CommunityTableRowBlock","CellBlock","CellTextBlock","CommunityTableHeader","CommunityTableHeaderBlock","CommunityTableFooter","SearchInputBlock","CommunityTableFooterBlock","TestBlock","CommunityLayoutBlock","CommunityMainBlock","main","CommunityNameBlock","h1","CommunityTableBlock","CommunityLayout","initItem","items","exact","render","CommunityHeader","tableRow","CommunityFooter","component","CommunityLayoutContainer","CommunityPage","ErrorPageDiv","App","GamePlayPage","location","rootSaga","all","rootReducer","combineReducers","Boolean","window","hostname","FixSizeBlock","FixSize","sagaMiddleware","createSagaMiddleware","store","createStore","composeWithDevTools","applyMiddleware","ReduxThunk","run","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6fdf7178.chunk.js","sourcesContent":["import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst HeaderBlock = styled.div`\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 50px;\r\n`;\r\n\r\nconst titleStyle = css`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: flex-start;\r\n    height: 40px;\r\n    background-color: transparent;\r\n    cursor: pointer;\r\n    font-size: 30px;\r\n    text-decoration: none;\r\n    text-shadow: 2px 2px 2px rgb(0, 0, 0, 0.2);\r\n    font-style: italic;\r\n`;\r\n\r\nconst TitleBlock = styled(Link)`\r\n    ${titleStyle}\r\n    color: rgb(0, 0, 0, 0.6);\r\n`;\r\n\r\nconst TitleFadeBlock = styled(Link)`\r\n    ${titleStyle}\r\n    color: rgb(0, 0, 0, 0.4);\r\n`;\r\n\r\nconst ControllBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    margin-left: 8%;\r\n`;\r\n\r\nconst GroupBlock = styled.div`\r\n    margin-left: 30px;\r\n    display: flex;\r\n`;\r\n\r\nconst TabBlock = styled.div`\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 50px;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    color: rgb(0, 0, 0, 0.4);\r\n    margin-left: 20px;\r\n`;\r\n\r\nconst TabLinkBlock = styled(Link)`\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 50px;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    color: rgb(0, 0, 0, 0.4);\r\n    margin-left: 20px;\r\n    text-decoration: none;\r\n    \r\n    ${props => props.hidden && css`\r\n        display: none;\r\n        visibility: hidden;\r\n    `};\r\n`;\r\n\r\nconst Tab = props => {\r\n    if(props.to) {\r\n        return (\r\n            <TabLinkBlock {...props}>\r\n                {props.children}\r\n            </TabLinkBlock>\r\n        )\r\n    } else {\r\n        return (\r\n            <TabBlock {...props}>\r\n                {props.children}\r\n            </TabBlock>\r\n        )\r\n    }\r\n}\r\n\r\nconst AuthBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    margin-right: 8%;\r\n`;\r\n\r\nconst UserWelcomeBlock = styled.div`\r\n    position: absolute;\r\n    top: 10%;\r\n    left: 0%;\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    align-items: center;\r\n    font-size: 10px;\r\n    color: rgb(0, 0, 0, 0.4);\r\n`\r\n\r\nconst Header = ({\r\n    onRecord,\r\n    onLogout,\r\n    onLogin,\r\n    session,\r\n    auth\r\n}) => {\r\n    let username;\r\n    \r\n    if(session) {\r\n        username = session.nickname;\r\n    };\r\n\r\n    if(auth) {\r\n        username = auth.username;\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <HeaderBlock>\r\n                <ControllBlock>\r\n                    <TitleBlock to='/'>\r\n                        chesssup\r\n                    </TitleBlock>\r\n                    <TitleFadeBlock to='/'>\r\n                        .com\r\n                    </TitleFadeBlock>\r\n                    <GroupBlock>\r\n                        <Tab to='/game'>\r\n                            Play\r\n                        </Tab>\r\n                        <Tab to='/community'>\r\n                            Community\r\n                        </Tab>\r\n                    </GroupBlock>\r\n                </ControllBlock>\r\n                <AuthBlock>\r\n                    <Tab onClick={onRecord}>\r\n                        Search\r\n                    </Tab>\r\n                    {auth ? (\r\n                        <>\r\n                            <Tab onClick={onRecord}>\r\n                                Setting\r\n                            </Tab>\r\n                            <Tab onClick={onRecord}>\r\n                                Record\r\n                            </Tab>\r\n                            <Tab onClick={onLogout}>\r\n                                Logout\r\n                                <UserWelcomeBlock>\r\n                                    {username}\r\n                                </UserWelcomeBlock>\r\n                            </Tab>\r\n                        </>\r\n                    ):(\r\n                        <Tab onClick={onLogin}>\r\n                            Login\r\n                            <UserWelcomeBlock>\r\n                                {username}\r\n                            </UserWelcomeBlock>\r\n                        </Tab>\r\n                    )}\r\n                </AuthBlock>\r\n            </HeaderBlock>\r\n           \r\n        </>\r\n    )\r\n};\r\n\r\n//  <GamesModalContainer\r\n//  openModal={openModal}\r\n//  setOpenModal={setOpenModal}\r\n//  />\r\n\r\nexport default React.memo(Header);","import { eventChannel } from 'redux-saga';\r\nimport SocketIo from 'socket.io-client';\r\nimport { put, call, take, cancelled } from 'redux-saga/effects';\r\n\r\n// eslint-disable-next-line\r\nfunction* createEventChannel(io) {\r\n    return eventChannel(emit => {\r\n        io.on('connect', socket => {\r\n            emit({\r\n                type: 'socket',\r\n                socket: io.id\r\n            });\r\n        })\r\n\r\n        //  reconnect  session  http call  \r\n\r\n        io.on('message', message => {\r\n            emit(message)\r\n        });\r\n\r\n        return () => {\r\n            io.close();\r\n        }\r\n    })\r\n}\r\n\r\nexport function* connectNamespace(params) {\r\n    let channel;\r\n\r\n    const {\r\n        url,\r\n        initializeSocket,\r\n        initializeValue,\r\n        changeValue,\r\n        updateValue,\r\n        query,\r\n    } = params;\r\n\r\n    console.dir(url);\r\n    console.dir(query);\r\n    try {\r\n        const io = SocketIo(url, {\r\n            query,\r\n            reconnection: false,\r\n            secure: true,\r\n        });\r\n        \r\n        channel = yield call(createEventChannel, io);\r\n    \r\n        while(true) {\r\n            const message = yield take(channel);\r\n            switch(message.type) {\r\n                case 'socket':\r\n                    yield put(initializeSocket(message));\r\n                    break;\r\n                case 'initialize':\r\n                    yield put(initializeValue(message));\r\n                    break;\r\n                case 'change':\r\n                    yield put(changeValue(message));\r\n                    break;\r\n                case 'update':\r\n                    yield put(updateValue(message));\r\n                    break;\r\n                default:\r\n                    console.dir(message);\r\n            }\r\n        }\r\n    } catch(e) {\r\n        console.dir(e);\r\n    } finally {\r\n        if (yield cancelled()) {\r\n            channel.close();\r\n        }\r\n    }\r\n}","export const createRequestActionTypes = type => {\r\n    const SUCCESS = `${type}_SUCCESS`;\r\n    const FAILURE = `${type}_FAILURE`;\r\n    return [ type, SUCCESS, FAILURE ];\r\n};\r\n\r\nexport default function createRequestThunk (type, request) {\r\n    const SUCCESS = `${type}_SUCCESS`;\r\n    const FAILURE = `${type}_FAILURE`;\r\n    return params => async dispatch => {\r\n        try {\r\n            const response = await request(params);\r\n            dispatch({\r\n                type: SUCCESS,\r\n                payload: response.data,\r\n            });\r\n            return response.data;\r\n        } catch(e) {\r\n            console.dir(e);\r\n            dispatch({\r\n                type: FAILURE,\r\n                payload: e,\r\n                error: true,\r\n            });\r\n            throw e;\r\n        }\r\n    }\r\n};","export const setLocalStorage = ({ ...rest }) => {\r\n    try {\r\n        Object.keys(rest).forEach(key => {\r\n            localStorage.setItem(key, JSON.stringify(rest[key]));\r\n        })\r\n    } catch(e) {\r\n        console.dir('Set localStorage failed');\r\n        console.dir(e);\r\n    }\r\n}\r\n\r\nexport const getLocalStorage = key => {\r\n    try {\r\n        return JSON.parse(localStorage.getItem(key));\r\n    } catch(e) {\r\n        console.dir('Get localStorage failed');\r\n        console.dir(e);\r\n    }   \r\n}\r\n\r\nexport const removeLocalStorage = key => {\r\n    try {\r\n        localStorage.removeItem(key);\r\n    } catch(e) {\r\n        console.dir('Remove localStorage failed');\r\n        console.dir(e);\r\n    }\r\n}\r\n\r\nexport const clearLocalStorage = () => {\r\n    try {\r\n        localStorage.clear();\r\n    } catch(e) {\r\n        console.dir('Clear localStorage failed');\r\n        console.dir(e);\r\n    }   \r\n};","import { createAction, handleActions } from 'redux-actions';\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\nimport produce from 'immer';\r\n\r\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\r\nimport * as authAPI from '../lib/api/auth';\r\nimport { setLocalStorage, removeLocalStorage } from '../lib/storage/storage';\r\n\r\nconst CONNECT_WEBSOCKET = 'auth/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'auth/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_SOCKET = 'auth/INITIALIZE_SOCKET';\r\nconst INITIALIZE_VALUE = 'auth/INITIALIZE_VALUE';\r\nconst CLEAR_VALUE = 'auth/CLEAR_VALUE';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\nexport const clearValue = createAction(CLEAR_VALUE);\r\n\r\nconst [ SET_SESSION, SET_SESSION_SUCCESS, SET_SESSION_FAILURE ] = createRequestActionTypes('auth/SET_SESSION');\r\nexport const setSessionThunk = createRequestThunk(SET_SESSION, authAPI.getSession);\r\n\r\nconst [ LOGIN, LOGIN_SUCCESS, LOGIN_FAILURE ] = createRequestActionTypes('auth/LOGIN');\r\nconst [ REGISTER, REGISTER_SUCCESS, REGISTER_FAILURE ] = createRequestActionTypes('auth/REGISTER');\r\nconst [ LOGOUT, LOGOUT_SUCCESS, LOGOUT_FAILURE ] = createRequestActionTypes('auth/LOGOUT');\r\nconst [ CHECK, CHECK_SUCCESS, CHECK_FAILURE ] = createRequestActionTypes('auth/CHECK');\r\nexport const loginThunk = createRequestThunk(LOGIN, authAPI.login);\r\nexport const registerThunk = createRequestThunk(REGISTER, authAPI.register);\r\nexport const logoutThunk = createRequestThunk(LOGOUT, authAPI.logout);\r\nexport const checkThunk = createRequestThunk(CHECK, authAPI.check);\r\n\r\nconst CHANGE_FIELD = 'auth/CHANGE_FIELD';\r\nconst CLEAR_FIELD = 'auth/CLEAR_FIELD';\r\nconst CLEAR_SPECIFIC_FIELD = 'auth/CLEAR_SPECIFIC_FIELD';\r\nexport const changeField = createAction(CHANGE_FIELD, payload => payload);\r\nexport const clearField = createAction(CLEAR_FIELD, payload => payload);\r\nexport const clearSpecificField = createAction(CLEAR_SPECIFIC_FIELD, payload => payload);\r\n\r\nexport const loginProcessThunk = param => async ( dispatch, getState ) => {\r\n    try {\r\n        const auth = await dispatch(loginThunk(param));\r\n        if(auth) {\r\n            setLocalStorage({ auth });\r\n        }\r\n    } catch(e) {\r\n        console.dir('Login failed');\r\n    }\r\n    \r\n}\r\n\r\nexport const registerProcessThunk = param => async ( dispatch, getState ) => {\r\n    try {\r\n        const auth = await dispatch(registerThunk(param));\r\n        if(auth) {\r\n            setLocalStorage({ auth });\r\n        }\r\n    } catch(e) {\r\n        console.dir('Register failed');\r\n    }\r\n    \r\n}\r\n\r\nexport const logoutProcessThunk = () => async( dispatch, getState ) => {\r\n    try {\r\n        await dispatch(logoutThunk());\r\n        removeLocalStorage('auth');\r\n    } catch(e) {\r\n        console.dir('Logout failed');\r\n    }\r\n}\r\n\r\nfunction* connectWebsocketSaga (action) {\r\n    const key = action.payload;\r\n        \r\n    const query = `key=${key}`;\r\n    \r\n    const socketTask = yield fork(connectNamespace, {\r\n        url: '/auth',\r\n        initializeSocket,\r\n        initializeValue,\r\n        query,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* authSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\n//  session  socket   reducer\r\n//  tempAuth  key    \r\nconst initialState = {\r\n    socket: null,\r\n    tempAuth: null,\r\n    session: null,\r\n    error: null,\r\n    auth: null,\r\n    authError: null,\r\n    login: {\r\n        username: '',\r\n        password: '',\r\n    },\r\n    register: {\r\n        username: '',\r\n        password: '',\r\n        passwordConfirm: '',\r\n    }\r\n};\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\r\n        ...state,\r\n        tempAuth: { ...rest },\r\n    }),\r\n    [CLEAR_VALUE]: state => ({\r\n        ...state,\r\n        tempAuth: initialState.tempAuth,\r\n    }),\r\n    [SET_SESSION_SUCCESS]: (state, { payload: session }) => ({\r\n        ...state,\r\n        session,\r\n    }),\r\n    [SET_SESSION_FAILURE]: (state, { payload: error }) => ({\r\n        ...state,\r\n        session: null,\r\n        error,\r\n    }),\r\n    [CHANGE_FIELD]: (state, { payload: { form, key, value } }) =>\r\n        produce(state, draft => {\r\n            draft[form][key] = value;\r\n        }),\r\n    [CLEAR_FIELD]: (state, { payload: { form } }) => ({\r\n        ...state,\r\n        [form]: initialState[form],\r\n        authError: initialState.authError,\r\n    }),\r\n    [CLEAR_SPECIFIC_FIELD]: (state, { payload: { form, key } }) => ({\r\n        ...state,\r\n        [form]: {\r\n            ...state[form],\r\n            [key]: initialState[form][key],\r\n        },\r\n        authError: initialState.authError,\r\n    }),\r\n    [LOGIN_SUCCESS]: (state, { payload : auth }) => ({\r\n        ...state,\r\n        auth,\r\n        authError: null,\r\n    }),\r\n    [LOGIN_FAILURE]: (state, { payload: authError }) => ({\r\n        ...state,\r\n        auth: null,\r\n        authError,\r\n    }),\r\n    [REGISTER_SUCCESS]: (state, { payload: auth }) => ({\r\n        ...state,\r\n        auth,\r\n        authError: null,\r\n    }),\r\n    [REGISTER_FAILURE]: (state, { payload: authError }) => ({\r\n        ...state,\r\n        auth: null,\r\n        authError,\r\n    }),\r\n    [LOGOUT_SUCCESS]: state => ({\r\n        ...state,\r\n        auth: null,\r\n        authError: null,\r\n    }),\r\n    [LOGOUT_FAILURE]: ( state, { payload: authError }) => ({\r\n        ...state,\r\n        auth: null,\r\n        authError,\r\n    }),\r\n    [CHECK_SUCCESS]: ( state, { payload: auth }) => ({\r\n        ...state,\r\n        auth,\r\n        authError: null,\r\n    }),\r\n    [CHECK_FAILURE]: ( state, { payload: authError }) => ({\r\n        ...state,\r\n        auth: null,\r\n        authError,\r\n    })\r\n}, initialState);","import axios from 'axios';\r\n\r\nexport const getSession = () =>\r\n    axios.get('/api/auth/getSession');\r\n\r\nexport const login = ({ username, password }) => \r\n    axios.post('/api/auth/login', ({ username, password }));\r\n\r\nexport const logout = () =>\r\n    axios.post('/api/auth/logout');\r\n\r\nexport const register = ({ username, password }) =>\r\n    axios.post('/api/auth/register', ({ username, password }));\r\n\r\nexport const check = () =>\r\n    axios.get('/api/auth/check');","import React, { useCallback } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Header from '../../components/common/Header';\r\nimport { logoutProcessThunk, clearField } from '../../modules/auth';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nconst HeaderContainer = ({ history }) => {\r\n    const { session, auth } = useSelector(({ auth }) => ({\r\n        session: auth.session,\r\n        auth: auth.auth,\r\n    }));\r\n    const dispatch = useDispatch();\r\n\r\n    const onLogout = useCallback(() => {\r\n        dispatch(logoutProcessThunk());\r\n    }, [dispatch]);\r\n    \r\n    const onRecord = useCallback(() => {\r\n        alert('onRecord');\r\n    }, []);\r\n    \r\n    //  link     dispatch    \r\n    //  onClick  dispatch  routing  \r\n    const onLogin = useCallback(() => {\r\n        dispatch(clearField({ form: 'login' }));\r\n        history.push('/login');\r\n    }, [dispatch, history]);\r\n\r\n    return (\r\n        <Header\r\n            onRecord={onRecord}\r\n            onLogout={onLogout}\r\n            onLogin={onLogin}\r\n            session={session}\r\n            auth={auth}\r\n        />\r\n    );\r\n};\r\n\r\nexport default withRouter(HeaderContainer);","import { useReducer, useEffect } from 'react';\r\n\r\nfunction reducer(state, action) {\r\n    switch (action.type) {\r\n        case 'LOADING':\r\n            return {\r\n                loading: true,\r\n                data: null,\r\n                error: null,\r\n            };\r\n        case 'SUCCESS':\r\n            return {\r\n                loading: false,\r\n                data: action.data,\r\n                error: null,\r\n            };\r\n        case 'FAILURE':\r\n            return {\r\n                loading: false,\r\n                data: null,\r\n                error: action.error,\r\n            };\r\n        default:\r\n            throw new Error('Unhandled action type Error')\r\n    }\r\n}\r\n\r\nfunction useAsync(callback, deps = []) {\r\n    const [ state, dispatch ] = useReducer(reducer, {\r\n        loading: false,\r\n        data: null,\r\n        error: false,\r\n    })\r\n\r\n    const fetchData = async () => {\r\n        dispatch({ type: 'LOADING' });\r\n        try {\r\n            const data = await callback();\r\n            dispatch({ type: 'SUCCESS', data });\r\n        } catch(e) {\r\n            dispatch({ type: 'FAILURE', error: e });\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    // eslint-disable-next-line\r\n    }, deps);\r\n\r\n    return [state, fetchData];\r\n}\r\n\r\nexport default useAsync;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst MainLayoutBlock = styled.div`\r\n    width: 100%;\r\n    height: 800px;\r\n`;\r\n\r\nconst MainLayout = () => {\r\n    return (\r\n        <MainLayoutBlock>\r\n            \r\n        </MainLayoutBlock>\r\n    )\r\n};\r\n\r\nexport default MainLayout;","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport useAsync from '../../lib/hook/useAsync';\r\nimport { setSessionThunk } from '../../modules/auth';\r\n\r\nimport MainLayout from '../../components/main/MainLayout';\r\n\r\nconst MainLayoutContainer = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const connection = async () => {\r\n        await dispatch(setSessionThunk());\r\n\r\n        return true;\r\n    };\r\n\r\n    const [state] = useAsync(connection, [ dispatch ]);\r\n\r\n    const { loading, data, error } = state;\r\n\r\n    if(loading) return null;\r\n    if(error) return null;\r\n    if(data) {\r\n        return (\r\n            <MainLayout />\r\n        )\r\n    }\r\n    return null;\r\n};\r\n\r\nexport default MainLayoutContainer;","import React from 'react';\r\nimport HeaderContainer from '../containers/common/HeaderContainer';\r\nimport MainLayoutContainer from '../containers/main/MainLayoutContainer';\r\n\r\nconst MainPage = () => {\r\n\r\n    return (\r\n        <>\r\n            <HeaderContainer />\r\n            <MainLayoutContainer />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default MainPage;","import React, { useRef, useCallback } from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { IoMdMail } from 'react-icons/io';\r\nimport { FaLock } from 'react-icons/fa';\r\nimport { IconContext } from 'react-icons';\r\n\r\nconst AuthFrameBlock = styled.form`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 800px;\r\n`;\r\n\r\nconst AuthFormBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    width: 30%;\r\n    height: 400px;\r\n    background-color: rgba(255, 255, 255);\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst TitleBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n    font-size: 20px;\r\n    height: 100px;\r\n    text-shadow: 2px 2px 2px rgba(0,0,0,0.14);\r\n`;\r\n\r\nconst InputFrameBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 100%;\r\n    height: 150px;\r\n`;\r\n\r\nconst InputFormBlock = styled.div`\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    padding-left: 1%;\r\n    width: 60%;\r\n\r\n    &+& {\r\n        margin-top: 10px;\r\n    }\r\n\r\n    @keyframes blinking {\r\n        0%{\r\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n        }\r\n        50% {\r\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.56), 0 3px 1px -2px rgba(0,0,0,0.8), 0 1px 5px 0 rgba(0,0,0,0.48);\r\n        }\r\n        100%{\r\n            box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n        }\r\n      }\r\n\r\n    ${props => props.blink && css`\r\n        animation: blinking 1s 2;\r\n    `}\r\n`\r\n\r\nconst inputStyle = css`\r\n    outline: none;\r\n    border: none;\r\n    height: 40px;\r\n    width: 80%;\r\n    padding-left: 5%;\r\n`;\r\n\r\nconst EmailInputBlock = styled.input`\r\n    ${inputStyle}\r\n`\r\n\r\nconst PasswordInputBlock = styled.input`\r\n    ${inputStyle}\r\n`;\r\n\r\nconst OptionFormBlock = styled.div`\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-top: 10px;\r\n    width: 60%;\r\n    height: 20px;\r\n`;\r\n\r\nconst SaveInputFormBlock = styled.div`\r\n    display: flex;\r\n    align-content: center;\r\n    width: 30%;\r\n    height: 100%;\r\n`;\r\n\r\nconst SaveInputBlock = styled.input`\r\n    height: 100%;\r\n    outline: none;\r\n    margin: 0px;\r\n`;\r\n\r\nconst SaveInputTextBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    height: 100%;\r\n    font-size: 10px;\r\n    color: rgb(0, 0, 0, 0.5);\r\n    cursor: pointer;\r\n    margin-left: 5px;\r\n`;\r\n\r\nconst ForgetBlock = styled.div`\r\n    font-size: 10px;\r\n    color: rgb(0, 0, 0, 0.5);\r\n    cursor: pointer;\r\n`;\r\n\r\nconst SubmitFrameBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 150px;\r\n`;\r\n\r\nconst SubmitBlock = styled.button`\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    border: none;\r\n    outline: none;\r\n    width: 30%;\r\n    cursor: pointer;\r\n    height: 40px;\r\n    background-color: transparent;\r\n\r\n    &:hover, :active {\r\n        background-color: rgb(0, 0, 0, 0.05);\r\n    }\r\n`;\r\n\r\nconst CreateFormBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    margin-top: 10px;\r\n    height: 40px;\r\n`;\r\n\r\nconst CreateBlock = styled.div`\r\n    color: rgb(0, 0, 0, 0.5);\r\n    font-size: 10px;\r\n`;\r\n\r\nconst CreateButtonBlock = styled.button`\r\n    outline: none;\r\n    border: none;\r\n    font-size: 10px;\r\n    color: black;\r\n    text-decoration: none;\r\n    cursor: pointer;\r\n    margin-left: 5px;\r\n    background-color: transparent;\r\n`;\r\n\r\nconst ErrorBlock = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    left: 48%;\r\n    width: 50%;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    font-size: 12px;\r\n    @keyframes fontOpacity {\r\n        0%{\r\n            color: rgb(0, 0, 0, 0);\r\n        }\r\n        100%{\r\n            color: rgb(0, 0, 0, 0.4);\r\n        }\r\n      }\r\n    animation: fontOpacity 1s 1;\r\n    color: rgb(0, 0, 0, 0.4);\r\n`\r\n\r\nconst AuthForm = ({ login, register, form, error, onSubmit, onChange, onRegister }) => {\r\n    const ref = useRef({});\r\n\r\n    const onClick = useCallback(tag => {\r\n        ref.current[tag].focus();\r\n    }, []);\r\n\r\n    return (\r\n        <AuthFrameBlock\r\n            autoComplete='off'\r\n            autoCorrect='off'\r\n            autoCapitalize='off'\r\n            spellCheck='false'\r\n            onSubmit={onSubmit}\r\n        >\r\n            <AuthFormBlock>\r\n                <TitleBlock>\r\n                    { login ? 'Sign In' : ( register ? 'Sign Up' : null ) }\r\n                </TitleBlock>\r\n                <InputFrameBlock>\r\n                    <InputFormBlock\r\n                        onClick={onClick.bind(null, 'username')}\r\n                        blink={error.username}\r\n                        key={`username_${error.count}`}\r\n                    >\r\n                        <IconContext.Provider value={{ style: { width: '20px', height: '20px', cursor: 'pointer'} }}>\r\n                            <IoMdMail />\r\n                        </IconContext.Provider>\r\n                        <EmailInputBlock\r\n                            type='text'\r\n                            name='username'\r\n                            placeholder='Email'\r\n                            onChange={onChange}\r\n                            value={form.username}\r\n                            ref={el => ref.current.username = el}\r\n                        />\r\n                        <ErrorBlock>\r\n                            {error.username}\r\n                        </ErrorBlock>\r\n                    </InputFormBlock>\r\n                    <InputFormBlock\r\n                        onClick={onClick.bind(null, 'password')}\r\n                        blink={error.password}\r\n                        key={`password_${error.count}`}\r\n                    >\r\n                        <IconContext.Provider value={{ style: { width: '20px', height: '20px', cursor: 'pointer' } }}>\r\n                            <FaLock />\r\n                        </IconContext.Provider>\r\n                        <PasswordInputBlock\r\n                            type='password'\r\n                            name='password'\r\n                            placeholder='Password'\r\n                            onChange={onChange}\r\n                            value={form.password}\r\n                            ref={el => ref.current.password = el}\r\n                        />\r\n                        <ErrorBlock>\r\n                            {error.password}\r\n                        </ErrorBlock>\r\n                    </InputFormBlock>\r\n                    {register ? (\r\n                        <InputFormBlock\r\n                            onClick={onClick.bind(null, 'passwordConfirm')}\r\n                            blink={error.passwordConfirm}\r\n                            key={`passwordConfirm_${error.count}`}\r\n                        >\r\n                            <IconContext.Provider value={{ style: { width: '20px', height: '20px', cursor: 'pointer' } }}>\r\n                                <FaLock />\r\n                            </IconContext.Provider>\r\n                            <PasswordInputBlock\r\n                                type='password'\r\n                                name='passwordConfirm'\r\n                                placeholder='Confirm Password'\r\n                                onChange={onChange}\r\n                                value={form.passwordConfirm}\r\n                                ref={el => ref.current.passwordConfirm = el}\r\n                            />\r\n                            <ErrorBlock>\r\n                                {error.passwordConfirm}\r\n                            </ErrorBlock>\r\n                        </InputFormBlock>\r\n                    ): null}\r\n                    {login ? (\r\n                        <OptionFormBlock>\r\n                            <SaveInputFormBlock>\r\n                                <SaveInputBlock\r\n                                    type='checkbox'\r\n                                />\r\n                                <SaveInputTextBlock>\r\n                                    Remember Me\r\n                                </SaveInputTextBlock>\r\n                            </SaveInputFormBlock>\r\n                            <ForgetBlock>\r\n                                Forget password?    \r\n                            </ForgetBlock>\r\n                        </OptionFormBlock>\r\n                    ): null}\r\n                </InputFrameBlock>\r\n                <SubmitFrameBlock>\r\n                    <SubmitBlock\r\n                        type='submit'\r\n                    >\r\n                        Submit\r\n                    </SubmitBlock>\r\n                    {login ? (\r\n                        <CreateFormBlock>\r\n                            <CreateBlock>\r\n                                Don't have an account?\r\n                            </CreateBlock>\r\n                            <CreateButtonBlock\r\n                                type='button'\r\n                                onClick={onRegister}\r\n                            >\r\n                                Create\r\n                            </CreateButtonBlock>\r\n                        </CreateFormBlock>\r\n                    ) : (\r\n                        <CreateFormBlock>\r\n                            <CreateBlock>\r\n                                Don't have an account?\r\n                            </CreateBlock>\r\n                            <CreateButtonBlock\r\n                                type='button'\r\n                            >\r\n                                Create\r\n                            </CreateButtonBlock>\r\n                        </CreateFormBlock>\r\n                    )}\r\n                </SubmitFrameBlock>\r\n            </AuthFormBlock>\r\n        </AuthFrameBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(AuthForm);","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport Joi from 'joi';\r\nimport { loginProcessThunk, changeField, clearField, clearSpecificField } from '../../modules/auth';\r\nimport AuthForm from '../../components/auth/AuthForm';\r\n\r\nconst LoginContainer = ({ history }) => {\r\n    const { form, auth, authError } = useSelector(({ auth }) => ({\r\n        form: auth.login,\r\n        auth: auth.auth,\r\n        authError: auth.authError,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [ error, setError ] = useState({\r\n        username: '',\r\n        password: ''\r\n    });\r\n\r\n    const onChange = useCallback(e => {\r\n        const { name, value } = e.target;\r\n        if(error[name] !== '') {\r\n            setError(prevState => ({\r\n                ...prevState,\r\n                [name]: '',\r\n            }));\r\n        }\r\n        dispatch(changeField({\r\n            form: 'login',\r\n            key: name,\r\n            value,\r\n        }));\r\n    }, [dispatch, error]);\r\n\r\n    const onSubmit = useCallback(e => {\r\n        e.preventDefault();\r\n        const { username, password } = form;\r\n\r\n        //  initialize\r\n        let nextError = Object.keys(form)\r\n            .reduce((acc, key) =>\r\n                ({\r\n                    ...acc,\r\n                    [key]: false,\r\n                }),{});\r\n\r\n        //  empty check\r\n        Object.keys(nextError)\r\n            .filter(key => form[key] === '')\r\n            .forEach(key => {\r\n                nextError = {\r\n                    ...nextError,\r\n                    [key]: 'Required field'\r\n                }\r\n            });\r\n\r\n        const schema = Joi.object().keys({\r\n            username: Joi.string().max(80).email({ minDomainAtoms: 2 }).required().error(() => ({ message: 'Wrong format' })),\r\n            password: Joi.string().min(4).max(16).required().error(() => ({ message: '4 ~ 16 digits' })),\r\n        });\r\n\r\n        const result = Joi.validate(form, schema, { abortEarly: false });\r\n\r\n        if(result.error) {\r\n            result.error.details.forEach(detail => {\r\n                if(!nextError[detail.path[0]]) {\r\n                    nextError = {\r\n                        ...nextError,\r\n                        [detail.path[0]]: detail.message,\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        if(Object.keys(nextError).filter(key => nextError[key]).length > 0) {\r\n            setError(prevState => ({\r\n                ...nextError,\r\n                count: prevState.count + 1,\r\n            }));\r\n            Object.keys(nextError).forEach(key => {\r\n\r\n                if(nextError[key]) {\r\n                    dispatch(clearSpecificField({ form: 'login', key }))\r\n                }\r\n            });\r\n\r\n            return;\r\n        };\r\n\r\n        dispatch(loginProcessThunk({ username, password }));\r\n        dispatch(clearField({ form: 'login' }));\r\n    }, [dispatch, form]);\r\n\r\n    useEffect(() => {\r\n        if(authError) {\r\n            let nextError = {};\r\n            const errorMention = authError.response.data;\r\n            Object.keys(errorMention).forEach(key => {\r\n                nextError = {\r\n                    ...nextError,\r\n                    [key]: errorMention[key],\r\n                }\r\n                // dispatch(clearSpecificField({ form: 'login', key }))\r\n            });\r\n\r\n            setError(nextError);\r\n            \r\n            return;\r\n        };\r\n\r\n        if(auth) {\r\n            history.push('/');\r\n        }\r\n    }, [history, auth, authError]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearField({ form: 'login' }));\r\n        }\r\n    }, [dispatch]);\r\n\r\n    const onRegister = useCallback(() => {\r\n        dispatch(clearField({ form: 'register' }));\r\n        history.push('/register');\r\n    }, [dispatch, history]);\r\n    \r\n    return (\r\n        <AuthForm\r\n            login\r\n            onSubmit={onSubmit}\r\n            onChange={onChange}\r\n            form={form}\r\n            error={error}\r\n            onRegister={onRegister}\r\n        />\r\n    )\r\n};\r\n\r\nexport default withRouter(LoginContainer);","import React from 'react';\r\nimport { Helmet } from 'react-helmet-async';\r\n\r\nimport HeaderContainer from '../containers/common/HeaderContainer';\r\nimport LoginContainer from '../containers/auth/LoginContainer';\r\n\r\nconst LoginPage = () => {\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>Sign In  Chesssup.com</title>\r\n            </Helmet>\r\n            <HeaderContainer />\r\n            <LoginContainer />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default LoginPage;","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport Joi from 'joi';\r\nimport AuthForm from '../../components/auth/AuthForm';\r\nimport { registerProcessThunk, changeField, clearField, clearSpecificField } from '../../modules/auth';\r\n\r\nconst RegisterContainer = ({ history }) => {\r\n    const { form, auth, authError } = useSelector(({ auth }) => ({\r\n        form: auth.register,\r\n        auth: auth.auth,\r\n        authError: auth.authError,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const [ error, setError ] = useState({\r\n        username: '',\r\n        password: '',\r\n        passwordConfirm: ''\r\n    })\r\n\r\n    const onChange = useCallback(e => {\r\n        const { name, value } = e.target;\r\n        if(error[name] !== '') {\r\n            setError(prevState => ({\r\n                ...prevState,\r\n                [name]: '',\r\n            }));\r\n        }\r\n        dispatch(changeField({\r\n            form: 'register',\r\n            key: name,\r\n            value,\r\n        }));\r\n    }, [dispatch, error]);\r\n\r\n    const onSubmit = useCallback(e => {\r\n        e.preventDefault();\r\n        const { username, password } = form;\r\n\r\n         //  initialize\r\n         let nextError = Object.keys(form)\r\n         .reduce((acc, key) =>\r\n             ({\r\n                 ...acc,\r\n                 [key]: false,\r\n             }),{});\r\n\r\n        //  empty check\r\n        Object.keys(nextError)\r\n            .filter(key => form[key] === '')\r\n            .forEach(key => {\r\n                nextError = {\r\n                    ...nextError,\r\n                    [key]: 'Required field'\r\n                }\r\n            });\r\n\r\n        const schema = Joi.object().keys({\r\n            username: Joi.string().max(80).email({ minDomainAtoms: 2 }).required().error(() => ({ message: 'Wrong format' })),\r\n            password: Joi.string().min(4).max(16).required().error(() => ({ message: '4 ~ 16 digits' })),\r\n            passwordConfirm: Joi.any().valid(Joi.ref('password')).required().error(() => ({ message: 'Password mismatch' })),\r\n        });\r\n\r\n        const result = Joi.validate(form, schema, { abortEarly: false });\r\n\r\n        if(result.error) {\r\n            result.error.details.forEach(detail => {\r\n                if(!nextError[detail.path[0]]) {\r\n                    nextError = {\r\n                        ...nextError,\r\n                        [detail.path[0]]: detail.message,\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        if(Object.keys(nextError).filter(key => nextError[key]).length > 0) {\r\n            setError(prevState => ({\r\n                ...nextError,\r\n                count: prevState.count + 1,\r\n            }));\r\n            Object.keys(nextError).forEach(key => {\r\n                if(nextError[key]) {\r\n                    dispatch(clearSpecificField({ form: 'register', key }))\r\n                }\r\n            });\r\n\r\n            return;\r\n        };\r\n\r\n        dispatch(registerProcessThunk({ username, password }));\r\n        dispatch(clearField({ form: 'register' }));\r\n    }, [dispatch, form]);\r\n\r\n    useEffect(() => {\r\n        if(authError) {\r\n            let nextError = {};\r\n            const errorMention = authError.response.data;\r\n            Object.keys(errorMention).forEach(key => {\r\n                nextError = {\r\n                    ...nextError,\r\n                    [key]: errorMention[key],\r\n                }\r\n                // dispatch(clearSpecificField({ form: 'register', key }))\r\n            });\r\n\r\n            setError(nextError);\r\n            \r\n            return;\r\n        }\r\n\r\n        if(auth) {\r\n            history.push('/');\r\n        }\r\n    }, [history, auth, authError])\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearField({ form: 'register' }));\r\n        };\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <AuthForm \r\n            register\r\n            onSubmit={onSubmit}\r\n            onChange={onChange}\r\n            form={form}\r\n            error={error}\r\n        />\r\n    )\r\n};\r\n\r\nexport default withRouter(RegisterContainer);","import React from 'react';\r\nimport { Helmet } from 'react-helmet-async';\r\n\r\nimport HeaderContainer from '../containers/common/HeaderContainer';\r\nimport RegisterContainer from '../containers/auth/RegisterContainer';\r\n\r\nconst RegisterPage = () => {\r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>Sign Up  Chesssup.com</title>\r\n            </Helmet>\r\n            <HeaderContainer />\r\n            <RegisterContainer />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default RegisterPage;","const board = [\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n    [ {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false}, {covered: false} ],\r\n];\r\n\r\nexport default board;","import { checkPlayersEveryMove } from './validation';\r\n\r\nconst rules = {\r\n    pawn: {\r\n        type: 'onetime',\r\n        move: [\r\n            {\r\n                dy: -1,\r\n                dx: 0,\r\n                except: function(props) {\r\n                    const { board, dy, dx } = props;\r\n                    if(board[dy][dx].piece) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                }\r\n            },\r\n            {\r\n                dy: -2,\r\n                dx: 0,\r\n                except: function(props) {\r\n                    const { board, y, x, owner } = props;\r\n                    if((owner === 'black' && y !== 1) || (owner === 'white' && y !== 6)) return false;\r\n                    if((owner === 'black' && board[2][x].piece) || (owner === 'white' && board[5][x].piece)) return false;\r\n                    if((owner === 'black' && board[3][x].piece) || (owner === 'white' && board[4][x].piece)) return false;\r\n                    return true;\r\n                }\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: -1,\r\n                except: function(props) {\r\n                    const { board, dy, dx } = props;\r\n                    if(board[dy][dx].piece) {\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                }\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 1,\r\n                except: function(props) {\r\n                    const { board, dy, dx } = props;\r\n                    if(board[dy][dx].piece) {\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                }\r\n            }\r\n        ],\r\n    },\r\n    knight: {\r\n        type: 'onetime',\r\n        move: [\r\n            {\r\n                dy: -2,\r\n                dx: -1,\r\n            },\r\n            {\r\n                dy: -2,\r\n                dx: 1,\r\n            },\r\n            {\r\n                dy: 2,\r\n                dx: -1,\r\n            },\r\n            {\r\n                dy: 2,\r\n                dx: 1,\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: -2,\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 2,\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: -2,\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: 2,\r\n            },\r\n        ]\r\n    },\r\n    king: {\r\n        type: 'onetime',\r\n        move: [\r\n            {\r\n                dy: 1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: 2,\r\n                except: function(props) {\r\n                    const { board, y, x, owner } = props;\r\n                    const enemy = (owner === 'white') ? 'black' : 'white';\r\n\r\n                   //  king dirty check\r\n                    if(!board[y][x].piece || board[y][x].dirty) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  rook dirty check\r\n                    if(!board[y][x+3].piece || board[y][x+3].dirty) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  check path is empty\r\n                    if(board[y][x+1].piece || board[y][x+2].piece) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  is king & path safe?, prevent castling loop by flag\r\n                    const coveredAxisBundle = checkPlayersEveryMove(enemy, board, true);\r\n                    const length = coveredAxisBundle.length;\r\n                    for(let i=0; i<length; ++i) {\r\n                        const axis = coveredAxisBundle[i];\r\n                        if(axis.dy === y && (axis.dx === x || axis.dx === x+1 || axis.dx === x+2)) {\r\n                            return false;\r\n                        }\r\n                    }\r\n\r\n\r\n                    return true;\r\n                },             \r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: -2,\r\n                except: function(props) {\r\n                    const { board, y, x, owner } = props;\r\n                    const enemy = (owner === 'white') ? 'black' : 'white';\r\n                    \r\n                    //  king dirty check\r\n                    if(!board[y][x].piece || board[y][x].dirty) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  rook dirty check\r\n                    if(!board[y][x-4].piece || board[y][x-4].dirty) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  check path is empty\r\n                    if(board[y][x-1].piece || board[y][x-2].piece || board[y][x-3].piece ) {\r\n                        return false;\r\n                    }\r\n\r\n                    //  is king & path safe?, prevent castling loop by flag\r\n                    const coveredAxisBundle = checkPlayersEveryMove(enemy, board, true);\r\n                    const length = coveredAxisBundle.length;\r\n                    for(let i=0; i<length; ++i) {\r\n                        const axis = coveredAxisBundle[i];\r\n                        if(axis.dy === y && (axis.dx === x || axis.dx === x-1 || axis.dx === x-2)) {\r\n                            return false;\r\n                        }\r\n                    }\r\n\r\n                    return true;\r\n                },             \r\n            }\r\n        ]\r\n    },\r\n    bishop: {\r\n        type: 'multitime',\r\n        move: [\r\n            {\r\n                dy: 1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 1\r\n            },\r\n        ]\r\n    },\r\n    rook: {\r\n        type: 'multitime',\r\n        move: [\r\n            {\r\n                dy: 1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: -1,\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: 1\r\n            },\r\n        ]\r\n    },\r\n    queen: {\r\n        type: 'multitime',\r\n        move: [\r\n            {\r\n                dy: 1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: -1\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 1\r\n            },\r\n            {\r\n                dy: 1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: -1,\r\n                dx: 0\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: -1,\r\n            },\r\n            {\r\n                dy: 0,\r\n                dx: 1\r\n            },\r\n        ]\r\n    }\r\n};\r\n\r\nexport default rules;","import _ from 'lodash';\r\n\r\nimport rules from './rules';\r\nimport { genBoard } from './genBoard';\r\n\r\nexport const findKingLocation = (player, board) => {\r\n    for(let i=0; i<8; ++i) {\r\n        for(let j=0; j<8; ++j) {\r\n            if(board[i][j].owner === player && board[i][j].piece === 'king') {\r\n                return {\r\n                    y: i,\r\n                    x: j,\r\n                };\r\n            };\r\n        }\r\n    }\r\n}\r\n\r\nexport const checkPlayersEveryMove = (player, board, castling) => {\r\n    let coveredAxisBundle = [];\r\n    for(let i=0; i<8; ++i) {\r\n        for(let j=0; j<8; ++j) {\r\n            if(board[i][j].owner === player) {\r\n                const coveredAxis = checkCovered(board, i, j, castling);\r\n                coveredAxisBundle = [ ...coveredAxisBundle, ...coveredAxis ];\r\n            }\r\n        }\r\n    };\r\n\r\n    return coveredAxisBundle;\r\n};\r\n\r\nexport const checkSafeMove = (player, board) => {\r\n    const enemy = player === 'white' ? 'black' : 'white';\r\n    const clonedBoard = _.cloneDeep(board);\r\n\r\n    const playerKing = findKingLocation(player, clonedBoard);\r\n    const coveredAxisBundle = checkPlayersEveryMove(enemy, clonedBoard);\r\n\r\n    coveredAxisBundle.forEach(axis => {\r\n        clonedBoard[axis.dy][axis.dx] = {\r\n            ...clonedBoard[axis.dy][axis.dx],\r\n            movable: true,\r\n        }\r\n    });\r\n\r\n    //  is king in danger?\r\n    if(clonedBoard[playerKing.y][playerKing.x].movable) {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n};\r\n\r\nexport const checkCheckmate = (player, board) => {\r\n\r\n    for(let i=0; i<8; ++i) {\r\n        for(let j=0; j<8; ++j) {\r\n            if(board[i][j].owner === player) {\r\n                const coveredAxis = checkCovered(board, i, j);\r\n                const length = coveredAxis.length;\r\n                for(let k=0; k<length; ++k) {\r\n                    const tempBoard = genBoard(board, { y: i, x: j }, { y: coveredAxis[k].dy, x: coveredAxis[k].dx })\r\n                    if(checkSafeMove(player, tempBoard)) {\r\n                        return false;\r\n                    };\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    return true;\r\n}\r\n\r\nexport const checkCovered = (board, y, x, castling) => {\r\n    const { piece, owner } = board[y][x];\r\n    let inform = { board, y, x, owner };\r\n    if(!piece) return;\r\n\r\n    const { type, move }= rules[piece];\r\n    let coveredAxis = [];\r\n\r\n    if(type === 'onetime') {\r\n        coveredAxis = move.reduce((acc, cur) => {\r\n            const dy = y + (owner === 'black' ? -cur.dy: +cur.dy);\r\n            const dx = x + cur.dx;\r\n            if(dy < 0 || dx < 0 || dy > 7 || dx > 7) return acc;\r\n            \r\n            inform = { ...inform, dy, dx };\r\n            \r\n            if(!cur.except || (!(piece === 'king' && castling) && cur.except && cur.except(inform))) {\r\n                if(!board[dy][dx].owner || board[y][x].owner !== board[dy][dx].owner) {\r\n                    acc.push({dy, dx});\r\n                }\r\n            }\r\n\r\n            return acc;\r\n        }, []);\r\n    } else {\r\n        coveredAxis = move.flatMap(cur => {\r\n            let counter = 0;\r\n            let coveredArr = [];\r\n            while(true) {\r\n                ++counter;\r\n                const dy = y + counter * (owner === 'black' ? -cur.dy: +cur.dy);\r\n                const dx = x + counter * cur.dx;\r\n                \r\n                if(dy < 0 || dx < 0 || dy > 7 || dx > 7) break;\r\n                if(board[dy][dx].owner && board[dy][dx].owner === owner) break;\r\n                coveredArr.push({dy, dx});\r\n                if(board[dy][dx].owner && board[dy][dx].owner !== owner) break;\r\n            }\r\n            return coveredArr;\r\n        });\r\n    }\r\n\r\n    return coveredAxis;\r\n};","import { createAction, handleActions } from 'redux-actions';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\nimport _ from 'lodash';\r\n\r\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\nimport * as canvasCtrl from '../lib/api/canvas';\r\n\r\n// import rules from '../lib/base/rules';\r\nimport board from '../lib/base/board';\r\nimport { checkCovered } from '../lib/base/validation';\r\n\r\nconst CONNECT_WEBSOCKET = 'canvas/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'canvas/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET, payload => payload);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_SOCKET = 'canvas/INITIALIZE_SOCKET';\r\nconst INITIALIZE_VALUE = 'canvas/INITIALIZE_VALUE';\r\nconst CHANGE_VALUE = 'canvas/CHANGE_VALUE';\r\nconst CLEAR_VALUE = 'canvas/CLEAR_VALUE';\r\nconst INITIALIZE_BLOCKED = 'canvas/INITIALIZE_BLOCKED';\r\nconst CHANGE_BLOCKED = 'canvas/CHANGE_BLOCKED';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\r\nexport const clearValue = createAction(CLEAR_VALUE);\r\nexport const initializeBlocked = createAction(INITIALIZE_BLOCKED, payload => payload);\r\nexport const changeBlocked = createAction(CHANGE_BLOCKED, payload => payload);\r\n\r\nconst [ SET_MOVE_PIECE, SET_MOVE_PIECE_SUCCESS, SET_MOVE_PIECE_FAILURE ] = createRequestActionTypes('canvas/SET_MOVE_PIECE');\r\nexport const setMovePieceThunk = createRequestThunk(SET_MOVE_PIECE, canvasCtrl.movePiece);\r\n\r\nconst makeReverseBoard = board => {\r\n    const reverseBoard = _.cloneDeep(board);\r\n    reverseBoard.reverse();\r\n    reverseBoard.forEach(row => {\r\n        row.reverse();\r\n    })\r\n    \r\n    return reverseBoard;\r\n}\r\n\r\nconst updateReverseBoard = (prevReverseBoard, nextOriginBoard) => {\r\n    const nextReverseBoard = makeReverseBoard(nextOriginBoard);\r\n    prevReverseBoard = [ ...prevReverseBoard ];\r\n\r\n    for(let i=0; i<8; ++i) {\r\n        for(let j=0; j<8; ++j) {\r\n            const nextPiece = nextReverseBoard[i][j];\r\n            const prevPiece = prevReverseBoard[i][j];\r\n            \r\n            console.dir(nextPiece);\r\n            console.dir(prevPiece);\r\n    \r\n            Object.keys(nextPiece).every(key => {\r\n                console.dir(key);\r\n                if(!prevPiece[key] || prevPiece[key] !== nextPiece[key]) {\r\n                    console.dir(prevPiece[key]);\r\n                    console.dir(nextPiece[key]);\r\n                    prevReverseBoard[i] = [ ...prevReverseBoard[i] ];\r\n                    prevReverseBoard[i][j] = {\r\n                        ...nextPiece,\r\n                    };\r\n                    return false;\r\n                }\r\n                return true;\r\n            });\r\n        }\r\n    }\r\n\r\n    return prevReverseBoard;\r\n};\r\n\r\nexport const changeValueThunk = ({ move }) => ( dispatch, getState ) => {\r\n    const { prev, next } = move;\r\n    const { canvas: { board, reverseBoard },\r\n            auth: { tempAuth },\r\n            game: { turn }\r\n        } = getState();\r\n    \r\n    if(tempAuth) {\r\n        if(((tempAuth.role === 'white' || tempAuth.role === 'spectator') && turn % 2 === 0) || (tempAuth.role === 'black' && turn % 2 === 1)) {\r\n            dispatch(changeBlocked({ blocked: false }));\r\n        } else {\r\n            dispatch(changeBlocked({ blocked: true }));\r\n        };\r\n    }\r\n\r\n    const cell = board[prev.y][prev.x];\r\n    const clearBoard = genClearBoard([...board], [\r\n        'covered',\r\n        'clicked',\r\n        'tracked',\r\n    ]);\r\n    \r\n    clearBoard[next.y] = [ ...clearBoard[next.y] ];\r\n    clearBoard[next.y][next.x] = {\r\n        ...cell,\r\n        tracked: true,\r\n        dirty: true,\r\n    };\r\n\r\n    clearBoard[prev.y]= [ ...clearBoard[prev.y] ];\r\n    clearBoard[prev.y][prev.x] = {\r\n        covered: false,\r\n        tracked: true,\r\n    };\r\n\r\n    //  promotion\r\n    const { owner, piece } = clearBoard[next.y][next.x];\r\n    if((owner === 'white' && piece === 'pawn' && next.y === 0) || (owner === 'black' && piece === 'pawn' && next.y === 7)) {\r\n        clearBoard[next.y][next.x] = {\r\n            ...clearBoard[next.y][next.x],\r\n            piece: 'queen',\r\n        }\r\n    };\r\n\r\n    //  castling\r\n    if(clearBoard[next.y][next.x].piece === 'king') {\r\n        if(next.x - prev.x === 2) {\r\n            clearBoard[prev.y] = [ ...clearBoard[prev.y] ];\r\n            \r\n            const pieceStore = { ...clearBoard[prev.y][prev.x+3] };\r\n            clearBoard[prev.y][prev.x+3] = {\r\n                covered: false\r\n            };\r\n            clearBoard[prev.y][prev.x+1] = {\r\n                ...pieceStore,\r\n                dirty: true,\r\n            };\r\n        }\r\n\r\n        if(next.x - prev.x === -2) {\r\n            clearBoard[prev.y] = [ ...clearBoard[prev.y] ];\r\n\r\n            const pieceStore = { ...clearBoard[prev.y][prev.x-4] };\r\n            clearBoard[prev.y][prev.x-4] = {\r\n                covered: false\r\n            };\r\n            clearBoard[prev.y][prev.x-1] = {\r\n                ...pieceStore,\r\n                dirty: true,\r\n            };\r\n        }\r\n    };\r\n\r\n    const nextReverseBoard = updateReverseBoard(reverseBoard, clearBoard);\r\n    \r\n    dispatch(changeValue({\r\n        board: clearBoard,\r\n        reverseBoard: nextReverseBoard,\r\n        clicked: null\r\n    }));\r\n}\r\n\r\nconst genClearBoard = (board, params) => {\r\n    const arr = [];\r\n\r\n    const leng = board.length;\r\n    for(let i=0; i<leng; ++i) {\r\n        for(let j=0; j<leng; ++j) {\r\n            let pass = false;\r\n            params.forEach(param => {\r\n                pass |= board[i][j][param];\r\n            });\r\n            if(pass) {\r\n                arr.push({\r\n                    y: i,\r\n                    x: j,\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    arr.forEach(cell => {\r\n        board[cell.y] = [ ...board[cell.y]];\r\n        const popedCell = board[cell.y][cell.x];\r\n        const newCell = {\r\n            ...popedCell,\r\n        };\r\n        params.forEach(param => {\r\n            newCell[param] = false;\r\n        });\r\n\r\n        board[cell.y].splice(cell.x, 1, newCell);\r\n    });\r\n\r\n    return board;\r\n}\r\n\r\nfunction* connectWebsocketSaga (action) {\r\n    const key = action.payload;\r\n    \r\n    const query = `key=${key}`;\r\n\r\n    const socketTask = yield fork(connectNamespace, {\r\n        url: '/canvas',\r\n        initializeSocket,\r\n        initializeValue,\r\n        changeValue: changeValueThunk,\r\n        query,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* canvasSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nexport const clickPieceThunk = ({ y: cy, x: cx }) => (dispatch, getState) => {\r\n    const {\r\n            canvas: { board, reverseBoard, clicked },\r\n            record: { reversed },\r\n            auth: { tempAuth },\r\n    } = getState();\r\n    \r\n    let reversal = false;\r\n    if(tempAuth) {\r\n        if((tempAuth.role === 'white' && reversed) || (tempAuth.role === 'black' && !reversed)) {\r\n            reversal = true;\r\n        }\r\n    }\r\n    \r\n    let y = cy;\r\n    let x = cx;\r\n    if(reversal) {\r\n        y = 7 - cy;\r\n        x = 7 - cx;\r\n    };\r\n\r\n    if(clicked && board[y][x].covered) {\r\n        const { canvas: { socket } } = getState();\r\n\r\n        dispatch(setMovePieceThunk({\r\n            socket,\r\n            move: {\r\n                prev: clicked,\r\n                next: {y, x}\r\n            }\r\n        }));\r\n        \r\n        return;\r\n    }\r\n    \r\n    let coveredAxis = checkCovered(board, y, x);\r\n    const clearBoard = genClearBoard([...board], [\r\n        'covered',\r\n        'clicked',\r\n    ]);\r\n\r\n    coveredAxis.forEach(axis => {\r\n        clearBoard[axis.dy] = [ ...clearBoard[axis.dy] ];\r\n        const popedCell = clearBoard[axis.dy][axis.dx];\r\n        clearBoard[axis.dy].splice(axis.dx, 1, {\r\n            ...popedCell,\r\n            covered:true,\r\n        });\r\n    });\r\n\r\n    clearBoard[y] = [ ...clearBoard[y] ];\r\n    clearBoard[y][x] = {\r\n        ...clearBoard[y][x],\r\n        clicked: true,\r\n    }\r\n\r\n    const nextReverseBoard = updateReverseBoard(reverseBoard, clearBoard);\r\n\r\n    dispatch(changeValue({\r\n        board: clearBoard,\r\n        reverseBoard: nextReverseBoard,\r\n        clicked: { y, x }\r\n    }));\r\n};\r\n\r\n\r\nconst reverseBoard = _.cloneDeep(board);\r\nreverseBoard.reverse();\r\nreverseBoard.forEach(row => {\r\n    row.reverse();\r\n});\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    error: null,\r\n    board,\r\n    reverseBoard,\r\n    clicked: null,\r\n    blocked: true,\r\n    reversed: false,\r\n};\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { board } }) => ({\r\n        ...state,\r\n        board,\r\n        reverseBoard: updateReverseBoard(state.reverseBoard, board),\r\n    }),\r\n    [CHANGE_VALUE]: (state, { payload : { board, reverseBoard, clicked } }) => ({\r\n        ...state,\r\n        board,\r\n        reverseBoard,\r\n        clicked,\r\n    }),\r\n    [CLEAR_VALUE]: state => initialState,\r\n    [INITIALIZE_BLOCKED]: (state, { payload: { blocked } }) => ({\r\n        ...state,\r\n        blocked,\r\n    }),\r\n    [CHANGE_BLOCKED]: (state, { payload: { blocked } }) => ({\r\n        ...state,\r\n        blocked,\r\n    }),\r\n    [SET_MOVE_PIECE_SUCCESS]: state => state,\r\n    [SET_MOVE_PIECE_FAILURE]: state => state,\r\n}, initialState);","import axios from 'axios';\r\n\r\nexport const movePiece = params =>\r\n    axios.post('/api/canvas/movePiece', params);","import { GiChessPawn, GiChessKing, GiChessQueen,\r\n    GiChessBishop, GiChessKnight, GiChessRook, GiPlainCircle } from 'react-icons/gi';\r\n\r\nexport const pieceMapper = {\r\n    'pawn': GiChessPawn,\r\n    'king': GiChessKing,\r\n    'queen': GiChessQueen,\r\n    'bishop': GiChessBishop,\r\n    'knight': GiChessKnight,\r\n    'rook': GiChessRook,\r\n    'covered': GiPlainCircle,\r\n}\r\n\r\nexport const playerMapper = {\r\n    'white': {\r\n        color: 'white',\r\n        style: {\r\n            filter: `drop-shadow(1px 1px 1px white)`,\r\n            width: '80%',\r\n            height: '80%',\r\n        }\r\n    },\r\n    'black': {\r\n        color: 'black',\r\n        style: {\r\n            filter: `drop-shadow(1px 1px 1px black)`,\r\n            width: '80%',\r\n            height: '80%',\r\n        }\r\n    },\r\n    'covered0': {\r\n        style: {\r\n            filter: `drop-shadow(1px 1px 1px black)`,\r\n            width: '30%',\r\n            height: '30%',\r\n            color: 'rgb(130, 151, 105)',\r\n            \r\n        }\r\n    },\r\n    'covered1': {\r\n        style: {\r\n            filter: `drop-shadow(1px 1px 1px black)`,\r\n            width: '30%',\r\n            height: '30%',\r\n            color: 'rgb(100, 111, 64)',\r\n        }\r\n    }\r\n}","import React, {useCallback} from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { IconContext } from 'react-icons';\r\nimport { pieceMapper, playerMapper } from '../../lib/base/pieceConverter';\r\n\r\nconst pieceConverter = ({ piece, owner, covered, cellNum }) => {\r\n    let coveredCanvas = null;\r\n    \r\n    if(covered) {\r\n        const Component = pieceMapper['covered'];\r\n\r\n        coveredCanvas = (\r\n            <IconContext.Provider value={playerMapper[`covered${cellNum}`]}>\r\n                <Component />\r\n            </IconContext.Provider>\r\n        );\r\n    }\r\n\r\n    if(!piece || !owner) {\r\n        return coveredCanvas;\r\n    }\r\n\r\n    const Component = pieceMapper[piece];\r\n    const capturedObject = coveredCanvas ? {\r\n        opacity: 0.5,\r\n        filter: owner === 'black' ? `drop-shadow(1px 1px 1px white)` : `drop-shadow(1px 1px 1px black)`,\r\n    } : null;\r\n\r\n    const styleObject = {\r\n        ...playerMapper[owner],\r\n        style: {\r\n            ...playerMapper[owner].style,\r\n            ...capturedObject,\r\n        }\r\n    };\r\n\r\n    return (\r\n        <IconContext.Provider value={styleObject}>\r\n            <Component />\r\n        </IconContext.Provider>\r\n    )\r\n};\r\n\r\nconst CanvasBlock = styled.div`\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst CanvasRowBlock = styled.div`\r\n    display: flex;\r\n`;\r\n\r\nconst CanvasCellBlock = styled.div`\r\n    display: flex;\r\n    cursor: pointer;\r\n    justify-content: center;\r\n    align-items: center;\r\n    /* width: 90px;\r\n    height: 90px; */\r\n    \r\n    width: ${props => {\r\n        if(props.cellSize) {\r\n            return props.cellSize;\r\n        }\r\n        return '90px';\r\n    }};\r\n\r\n    height: ${props => {\r\n        if(props.cellSize) {\r\n            return props.cellSize;\r\n        }\r\n        return '90px';\r\n    }};\r\n\r\n    ${props => props.cellNum === 0 && css`\r\n        background-color: rgb(240, 217, 181);\r\n    `}\r\n\r\n    ${props => props.cellNum === 1 && css`\r\n        background-color: rgb(181, 136, 99);\r\n    `}\r\n\r\n    ${props => props.cellNum === 0 && props.clicked && css`\r\n        background-color: rgb(130, 151, 105);\r\n    `}\r\n\r\n    ${props => props.cellNum === 1 && props.clicked && css`\r\n        background-color: rgb(100, 111, 64);\r\n    `}\r\n\r\n    ${props => props.cellNum === 0 && props.tracked && css`\r\n        background-color: rgb(205, 210, 106);\r\n    `}\r\n\r\n    ${props => props.cellNum === 1 && props.tracked && css`\r\n        background-color: rgb(170, 162, 58);\r\n    `}\r\n\r\n    &:hover {\r\n        ${props => props.cellNum === 0 && props.covered && css`\r\n            background-color: rgb(174, 177, 135);\r\n        `}\r\n\r\n        ${props => props.cellNum === 1 && props.covered && css`\r\n            background-color: rgb(132, 121, 78);\r\n        `}  \r\n    }\r\n`\r\n\r\nconst CanvasRow = React.memo(({ row, y, cellSize, onClickCell, pieceConverter }) => {\r\n    console.dir('Canvas Row');\r\n    return (\r\n        <CanvasRowBlock>\r\n            {row.map((cell, x) => (\r\n                <CanvasCell\r\n                    key={`cell_${y}_${x}`}\r\n                    onClick={onClickCell.bind(null, {y, x})}\r\n                    pieceConverter={pieceConverter}\r\n                    cellNum={(x + y) % 2}\r\n                    cellSize={cellSize}\r\n                    cell={cell}\r\n                    y={y}\r\n                    x={x}\r\n                />\r\n            ))}\r\n        </CanvasRowBlock>\r\n    )\r\n}, (prevProps, nextProps) => {\r\n    return prevProps.row === nextProps.row;\r\n});\r\n\r\nconst CanvasCell = React.memo(({ cell, cellSize, cellNum, onClick, pieceConverter, y, x }) => {\r\n    console.dir(`Canvas Cell ${y}_${x}`);\r\n    return (\r\n        <CanvasCellBlock\r\n            onClick={onClick}\r\n            cellNum={cellNum}\r\n            cellSize={cellSize}\r\n            {...cell}\r\n        >\r\n            {pieceConverter({\r\n                piece: cell.piece,\r\n                owner: cell.owner,\r\n                covered: cell.covered,\r\n                cellNum,\r\n            })}\r\n        </CanvasCellBlock>\r\n    )\r\n}, (prevProps, nextProps) => {\r\n    return prevProps.cell === nextProps.cell;\r\n});\r\n\r\nconst CanvasContentBlock = styled.div`\r\n    ${props => props.blocked && css`\r\n        pointer-events: none;\r\n    `}\r\n`;\r\n\r\nconst CanvasContent = ({ board, blocked, cellSize, onClick }) => {\r\n    //  can't memoization\r\n    const onClickCell = useCallback(({y, x}) => {\r\n        onClick(y, x);\r\n    }, [onClick]);\r\n\r\n    // const rev = board.reverse().map((row, y) => (\r\n    //     <CanvasRow\r\n    //         key={`row_${y}`}\r\n    //         row={row.reverse()}\r\n    //         y={y}\r\n    //         cellSize={cellSize}\r\n    //         onClickCell={onClickCell}\r\n    //         pieceConverter={pieceConverter}\r\n    //     />\r\n    // ));\r\n    \r\n    return  (\r\n        <CanvasContentBlock blocked={blocked}>\r\n            {board.map((row, y) => (\r\n                <CanvasRow\r\n                    key={`row_${y}`}\r\n                    row={row}\r\n                    y={y}\r\n                    cellSize={cellSize}\r\n                    onClickCell={onClickCell}\r\n                    pieceConverter={pieceConverter}\r\n                />\r\n            ))}\r\n        </ CanvasContentBlock>\r\n    )\r\n}\r\n\r\nconst Canvas = props => {\r\n    return (\r\n        <CanvasBlock>\r\n            <CanvasContent {...props} />\r\n        </CanvasBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(Canvas);","import React, { useCallback, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport Canvas from '../../components/gameplay/Canvas';\r\nimport { clickPieceThunk, initializeBlocked } from '../../modules/canvas';\r\nimport { clearValue } from '../../modules/canvas';\r\n\r\nconst CanvasContainer = ({ cellSize }) => {\r\n    const { board, reverseBoard, reversed, blocked, turn, tempAuth } = useSelector(({ canvas, auth, game, record }) => ({\r\n        board: canvas.board,\r\n        reverseBoard: canvas.reverseBoard,\r\n        reversed: record.reversed,\r\n        blocked: canvas.blocked,\r\n        turn: game.turn,\r\n        tempAuth: auth.tempAuth,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n    \r\n    useEffect(() => {\r\n        if(tempAuth) {\r\n            if((tempAuth.role === 'white' && turn % 2 === 0) || (tempAuth.role === 'black' && turn % 2 === 1)) {\r\n                dispatch(initializeBlocked({ blocked: false }));\r\n            } else {\r\n                dispatch(initializeBlocked({ blocked: true }));\r\n            }\r\n        }\r\n    }, [dispatch, turn, tempAuth]);\r\n    \r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearValue());\r\n        }\r\n    }, [dispatch])\r\n\r\n    //  function   Context    redux state   \r\n    //   event handler React dom   dom rerender  \r\n    //   state     .  ref    \r\n    //   redux state    thunk   \r\n\r\n    const onClick = useCallback((y, x) => {\r\n        dispatch(clickPieceThunk({ y, x }));\r\n    }, [dispatch]);\r\n\r\n    let reversal = false;\r\n    if(tempAuth) {\r\n        if(((tempAuth.role === 'white' || tempAuth.role === 'spectator') && reversed) || (tempAuth.role === 'black' && !reversed)) {\r\n            reversal = true;\r\n        }\r\n    }\r\n\r\n    let servedBoard = board;\r\n    if(reversal) {\r\n        servedBoard = reverseBoard;\r\n    };\r\n\r\n    return (\r\n        <Canvas\r\n            board={servedBoard}\r\n            blocked={blocked}\r\n            onClick={onClick}\r\n            cellSize={cellSize}\r\n        />\r\n    )\r\n};\r\n\r\nexport default CanvasContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport CanvasContainer from '../../containers/gameplay/CanvasContainer';\r\n\r\nconst CanvasWrapperBlock = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    transition: 0.5s;\r\n    opacity: 0;\r\n\r\n    &:hover {\r\n        opacity: 1;\r\n    }\r\n`;\r\n\r\nconst UnClickableBlock = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    /* pointer-events: none; */\r\n`;\r\n\r\nconst CanvasWrapper = ({ cellSize }) => {\r\n    return (\r\n        <CanvasWrapperBlock>\r\n            <UnClickableBlock>\r\n                <CanvasContainer cellSize={cellSize} />\r\n            </UnClickableBlock>\r\n        </CanvasWrapperBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(CanvasWrapper);","import React, { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport useAsync from '../../lib/hook/useAsync';\r\nimport { connectWebsocket, disconnectWebsocket } from '../../modules/canvas';\r\nimport CanvasWrapper from '../../components/game/CanvasWrapper';\r\n\r\nconst CanvasWrapperContainer = ({ gameId, cellSize }) => {\r\n    const dispatch = useDispatch();\r\n\r\n    const connection = async () => {\r\n        dispatch(disconnectWebsocket());\r\n        await Promise.resolve().then(() => {\r\n            dispatch(connectWebsocket(gameId));\r\n        });\r\n        return true;\r\n    };\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(disconnectWebsocket());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    const [state] = useAsync(connection, [dispatch]);\r\n\r\n    const { loading, data, error } = state;\r\n\r\n    if(loading) return null;\r\n    if(error) return null;\r\n    if(data) {\r\n        return (\r\n            <CanvasWrapper cellSize={cellSize} />\r\n        )\r\n    }\r\n    return null;\r\n};\r\n\r\nexport default CanvasWrapperContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport CanvasWrapperContainer from '../../containers/game/CanvasWapperContainer';\r\n\r\nconst GridBoxBlock = styled.div`\r\n    z-index: 1;\r\n    display: flex;\r\n    position: relative;\r\n    flex-direction: column;\r\n    justify-content: space-evenly;\r\n    align-items: center;\r\n    width: 216px;\r\n    height: 216px;\r\n    background-color: rgb(255,255,255, 0.6);\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    cursor: pointer;\r\n    transition: 0.5s;\r\n\r\n    &:hover {\r\n        background-color: rgb(255,255,255, 0.1);\r\n    }\r\n\r\n    &:first-child {\r\n        margin-left: 18px;\r\n    }\r\n\r\n    & + & {\r\n        margin-left: 18px;\r\n    }\r\n`\r\n\r\nconst BoxTitleBlock = styled.div`\r\n    \r\n`;\r\n\r\nconst BoxContentBlock = styled.div`\r\n    \r\n`;\r\n\r\nconst GridBox = ({ game, canvas, onClick, onMouseEnter, onMouseLeave, ...rest }) => {\r\n    console.dir('game~');\r\n\r\n    return (\r\n        <GridBoxBlock\r\n            onClick={() => onClick(game.key)}\r\n            onMouseEnter={onMouseEnter}\r\n            onMouseLeave={onMouseLeave}\r\n            {...rest}\r\n        >\r\n            <BoxTitleBlock>\r\n                {game.name}\r\n            </BoxTitleBlock>\r\n            <BoxContentBlock>\r\n                {game.participant}\r\n            </BoxContentBlock>\r\n            {canvas ?\r\n            (<CanvasWrapperContainer\r\n                gameId={game.key}\r\n                cellSize = '27px'\r\n            />)\r\n            : null}\r\n        </GridBoxBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(GridBox);","import React, { useCallback, useState } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport GridBox from '../../components/game/GridBox';\r\n\r\nconst GridBoxContainer = ({ history, ...rest }) => {\r\n    const [ canvas, setCanvas ] = useState(false);\r\n\r\n    const onMouseEnter = useCallback(() => {\r\n        setCanvas(true);\r\n    }, []);\r\n\r\n    const onMouseLeave = useCallback(() => {\r\n        setCanvas(false);\r\n    }, []);\r\n\r\n    const onClick = useCallback((gameId) => {\r\n        history.push(`/game/${gameId}`);\r\n    }, [history]);\r\n\r\n    return (\r\n        <GridBox\r\n            {...rest}\r\n            canvas={canvas}\r\n            onClick={onClick}\r\n            onMouseEnter={onMouseEnter}\r\n            onMouseLeave={onMouseLeave}\r\n        />\r\n    )\r\n};\r\n\r\nexport default withRouter(GridBoxContainer);","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { FaApple } from 'react-icons/fa';\r\nimport { IconContext } from 'react-icons';\r\n\r\nimport GridBoxContainer from '../../containers/game/GridBoxContainer';\r\n\r\nconst gridSize = 3;\r\n\r\nconst GridRowBlock = styled.div`\r\n    display: flex;\r\n    width: 100%;\r\n\r\n    &:first-child {\r\n        margin-top: 18px;\r\n    }\r\n\r\n    &:last-child {\r\n        margin-bottom: 18px;\r\n    }\r\n\r\n    & + & {\r\n        margin-top: 18px;\r\n    }\r\n`;\r\n\r\nconst GridLayoutFrameBlock = styled.div`\r\n    position: relative;\r\n    background-color: rgba(255, 255, 255, 0.5);\r\n`;\r\n\r\nconst GridLayoutHiddenBlock = styled.div`\r\n    width: 720px;\r\n    height: 720px;\r\n    overflow: hidden;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst GridLayoutBlock = styled.div`\r\n    width: 720px;\r\n    height: 720px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    overflow-y: overlay;\r\n    padding-right: 20px;\r\n`;\r\n\r\nconst GridLayout = ({ games, onGameClick }) => {\r\n   \r\n    if(!games) return <GridLayoutBlock />;\r\n\r\n    const list = [ ...games ];\r\n    \r\n    const backgroundStyle = {\r\n        position: 'absolute',\r\n        top: '0',\r\n        left: '0',\r\n        width: '720px',\r\n        height: '720px',\r\n        opacity: '0.2',\r\n        zIndex: -1,\r\n    }\r\n    const gridArr = [];\r\n    const rowSize = Math.floor(list.length / gridSize);\r\n    for(let i=0; i<=rowSize; ++i) {\r\n        gridArr.push(\r\n            <GridRowBlock\r\n                key={`GridRowBlock_${i}`}\r\n            >\r\n                {\r\n                    list.splice(0, gridSize).map(game => (\r\n                        <GridBoxContainer\r\n                            key={`GridBox${game.name}`}\r\n                            game={game}\r\n                            onClick={e => onGameClick(e, game.key)}\r\n                        />\r\n                    ))\r\n                }\r\n            </GridRowBlock>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <GridLayoutFrameBlock>\r\n            <GridLayoutHiddenBlock>\r\n                <GridLayoutBlock>\r\n                    {gridArr}\r\n                </GridLayoutBlock>\r\n            </GridLayoutHiddenBlock>\r\n            <IconContext.Provider value={{ style: backgroundStyle }}>\r\n                <FaApple />\r\n            </IconContext.Provider>\r\n        </ GridLayoutFrameBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(GridLayout);","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport GridLayout from '../../components/game/GridLayout';\r\n\r\nconst GridLayoutContainer = () => {\r\n    const { games } = useSelector(({ games }) => ({\r\n        games: games.games,\r\n    }));\r\n\r\n    return (\r\n        <GridLayout games={games} />\r\n    )\r\n};\r\n\r\nexport default GridLayoutContainer;","import React from 'react';\r\n\r\nconst Summary = () => {\r\n    return (\r\n        <>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default React.memo(Summary);","import React from 'react';\r\nimport Summary from '../../components/game/Summary';\r\n\r\nconst SummaryContainer = () => {\r\n    return (\r\n        <Summary />\r\n    )\r\n};\r\n\r\nexport default SummaryContainer;","import { useState, useCallback, useRef, useEffect } from 'react';\r\n\r\nconst CheckOutsideOfComponent = (initialState) => {\r\n    const [componentState, setComponentState] = useState(initialState);\r\n    const ref = useRef(null);\r\n\r\n    const checkClickOutside = useCallback(e => {\r\n        if(ref.current && !ref.current.contains(e.target)) {\r\n            setComponentState(false);\r\n        }\r\n    }, []);\r\n\r\n    //  not Capturing, use Bubbling(Default)\r\n    useEffect(() => {\r\n        document.addEventListener('click', checkClickOutside);\r\n        return () => {\r\n            document.removeEventListener('click', checkClickOutside);\r\n        }\r\n    }, [checkClickOutside]);\r\n\r\n    return { ref, componentState, setComponentState };\r\n}\r\n\r\nexport default CheckOutsideOfComponent;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst SelectionFrameBlock = styled.div`\r\n    position: relative;\r\n`\r\n\r\nconst NameBlock = styled.div`\r\n    position: absolute;\r\n    top: -10px;\r\n    left: 70%;\r\n    width: 30%;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n    color: rgba(0,0,0,0.3);\r\n`\r\n\r\nconst SelectionBlock = styled.div`\r\n    width: 130px;\r\n    height: 30px;\r\n    box-sizing: border-box;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    padding-left: 10px;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    font-size: 13px;\r\n    \r\n    cursor: pointer;\r\n    &:active {\r\n        background-color: rgba(0,0,0,0.1);\r\n    }\r\n`\r\n\r\nconst SelecitonToolTipFrameBlock = styled.div`\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    margin-top: 40px;\r\n    z-index: 10;\r\n    background-color: white;\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 130px;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst SelectionToolTipBlock = styled.div`\r\n    width: 100%;\r\n    box-sizing: border-box;\r\n    height: 30px;\r\n    padding-left: 10px;\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n    font-size: 13px;\r\n\r\n    &:hover {\r\n        background-color: rgba(0,0,0,0.1);\r\n    }\r\n`;\r\n\r\nconst Selection = ({\r\n    kind,\r\n    name,\r\n    list,\r\n    reference,\r\n    componentState,\r\n    onClickSelection,\r\n    onClickOption\r\n}) => {    \r\n    return (\r\n        <SelectionFrameBlock>\r\n            <NameBlock>\r\n                {kind}\r\n            </NameBlock>\r\n            <SelectionBlock\r\n                ref={reference}\r\n                onClick={onClickSelection}\r\n            >\r\n                {name}\r\n            </SelectionBlock>\r\n            {componentState && (\r\n                <SelecitonToolTipFrameBlock>\r\n                    {list.map(optionName => (\r\n                        <SelectionToolTipBlock\r\n                            key={optionName}\r\n                            onClick={() => onClickOption(optionName)}\r\n                        >\r\n                            {optionName}\r\n                        </SelectionToolTipBlock>\r\n                    ))}\r\n                </SelecitonToolTipFrameBlock>\r\n            )}\r\n        </SelectionFrameBlock>\r\n    );\r\n};\r\n\r\nexport default React.memo(Selection);","import { createAction, handleActions } from 'redux-actions';\r\n\r\nconst CHANGE_FIELD = 'create/CHANGE_FIELD';\r\nconst CLEAR_FIELD = 'create/CLEAR_FIELD';\r\nexport const changeField = createAction(CHANGE_FIELD, payload => payload);\r\nexport const clearField = createAction(CLEAR_FIELD, payload => payload);\r\n\r\nconst initialState = {\r\n    map: 'Classical',\r\n    mapList: ['Classical', 'Crazy House', 'Racing Kings'],\r\n    mode: 'Normal',\r\n    modeList: ['Normal', 'Rank'],\r\n    defaultTime: 15,\r\n    extraTime: 30,\r\n    config: {\r\n        defaultTime: {\r\n            min: 1,\r\n            max: 30,\r\n            step: 1,\r\n            defaultValue: 15,\r\n        },\r\n        extraTime: {\r\n            min: 0,\r\n            max: 60,\r\n            step: 5,\r\n            defaultValue: 30,\r\n        }\r\n    },\r\n    piece: 'white',\r\n};\r\n\r\nexport default handleActions({\r\n    [CHANGE_FIELD]: (state, { payload: { key, value } }) => ({\r\n        ...state,\r\n        [key]: value,\r\n    }),\r\n    [CLEAR_FIELD]: state => initialState,\r\n}, initialState);","import React, { useCallback } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport CheckOutsideOfComponent from '../../containers/HOC/CheckOutsideOfComponent';\r\nimport Selection from '../../components/game/Selection';\r\nimport { changeField } from '../../modules/create';\r\n\r\nconst SelecitonContainer = ({ kind }) => {\r\n    const { name, list } = useSelector(({ create }) => ({\r\n        name: create[kind],\r\n        list: create[`${kind}List`],\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const { ref: reference, componentState, setComponentState } = CheckOutsideOfComponent(false);\r\n\r\n    const onClickSelection = useCallback(() => {\r\n        setComponentState(prevState => !prevState);\r\n    }, [setComponentState]);\r\n\r\n    const onClickOption = useCallback(name => {\r\n        dispatch(changeField({\r\n            key: kind,\r\n            value: name,\r\n        }));\r\n    }, [dispatch, kind]);\r\n\r\n    return (\r\n        <Selection\r\n            kind={kind}\r\n            name={name}\r\n            list={list}\r\n            reference={reference}\r\n            componentState={componentState}\r\n            onClickSelection={onClickSelection}\r\n            onClickOption={onClickOption}\r\n        />\r\n    )\r\n};\r\n\r\nexport default SelecitonContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst SliderFrameBlock = styled.div`\r\n    display: flex;\r\n    width: 100%;\r\n    justify-content: space-between;\r\n    & + & {\r\n        margin-top: 15px;\r\n    }\r\n`;\r\n\r\nconst SliderBoxBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 200px;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst SliderBlock = styled.input`\r\n    -webkit-appearance: none;\r\n    width: 150px;\r\n    height: 30px;\r\n    cursor: pointer;\r\n    background: ${props => {\r\n        if(props.kind === 'defaultTime') {\r\n            // return `linear-gradient(to right, #16a085 0%, black 100%)`;\r\n            return `linear-gradient(to right, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0.6) 100%)`;\r\n        } else {\r\n            // return `linear-gradient(to right, red 0%, black 100%)`;\r\n            return `linear-gradient(to right, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0.6) 100%)`;\r\n        }\r\n    }};\r\n    background-size: 140px 5px;\r\n    background-position: center;\r\n    background-repeat: no-repeat;\r\n    overflow: hidden;\r\n    outline: none;\r\n    /* zoom: 100%; */\r\n    display: block;\r\n\r\n    &::-webkit-slider-thumb {\r\n        -webkit-appearance: none;\r\n        width: 10px;\r\n        height: 10px;\r\n        box-shadow: 0 2px 2px 0 rgba(0,0,0,0.36), 0 3px 1px -2px rgba(0,0,0,0.6), 0 1px 5px 0 rgba(0,0,0,0.36);\r\n        position: relative;\r\n        background-color: rgba(255,255,255, 0.8);\r\n        z-index: 3;\r\n    };\r\n`;\r\n\r\nconst NameBlock = styled.div`\r\n    position: absolute;\r\n    top: -10px;\r\n    left: 70%;\r\n    width: 30%;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n    color: rgba(0,0,0,0.3);\r\n`\r\n\r\nconst ValueBlock = styled.div`\r\n    display: flex;\r\n    position: relative;\r\n    justify-content: center;\r\n    align-items: center;\r\n    font-size: 15px;\r\n    width: 60px;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst Slider = ({ onChange, kind, value, config }) => {\r\n    const name = kind.substring(0, kind.length - 4);\r\n\r\n    return (\r\n        <SliderFrameBlock>\r\n            <SliderBoxBlock>\r\n                <SliderBlock\r\n                    type='range'\r\n                    onChange={onChange}\r\n                    {...config}\r\n                    kind={kind}\r\n                    value={value}\r\n                />\r\n            </SliderBoxBlock>\r\n            <ValueBlock>\r\n                <NameBlock>\r\n                    {name}\r\n                </NameBlock>\r\n                {value}\r\n            </ValueBlock>\r\n        </SliderFrameBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(Slider);","import React, { useCallback } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport Slider from '../../components/game/Slider';\r\nimport { changeField } from '../../modules/create';\r\n\r\nconst SliderContainer = ({ kind }) => {\r\n    const { value, config } = useSelector(({ create }) => ({\r\n        value: create[kind],\r\n        config: create.config[kind],\r\n    }));\r\n    const dispatch = useDispatch();\r\n\r\n    const onChange = useCallback(e => {\r\n        dispatch(changeField({\r\n            key: kind,\r\n            value: e.target.value,\r\n        }));\r\n    }, [dispatch, kind]);\r\n\r\n    return (\r\n        <Slider\r\n            onChange={onChange}\r\n            kind={kind}\r\n            value={value}\r\n            config={config}\r\n        />\r\n    )\r\n};\r\n\r\nexport default SliderContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { FaChessKing } from 'react-icons/fa';\r\nimport { IconContext } from 'react-icons';\r\n\r\nconst IconBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 40px;\r\n    height: 40px;\r\n    cursor: pointer;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n\r\n    background-color: ${props => props.checked && 'rgba(0,0,0,0.1)' };\r\n    &:hover {\r\n        background-color: rgba(0, 0, 0, 0.1);\r\n    }\r\n`;\r\n\r\nconst Icon = ({ checked, kind, onClick }) => {\r\n    const opposite = kind === 'white' ? 'black' : 'white';\r\n    const styleObj = {\r\n        style: {\r\n            color: kind,\r\n            filter: `drop-shadow(1px 1px 1px ${opposite})`,\r\n            width: '30px',\r\n            height: '30px',\r\n        }\r\n    };\r\n\r\n    return (\r\n        <IconBlock\r\n            checked={checked ? 1 : 0}\r\n            onClick={() => onClick(kind)}\r\n        >\r\n            <IconContext.Provider value={styleObj}>\r\n                <FaChessKing />\r\n            </IconContext.Provider>\r\n        </IconBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(Icon);","import React, { useCallback } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport Icon from '../../components/game/Icon';\r\nimport { changeField } from '../../modules/create';\r\n\r\nconst IconContainer = ({ white, black }) => {\r\n    const { piece } = useSelector(({ create }) => ({\r\n        piece: create.piece,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n    \r\n    const onClick = useCallback(value => {\r\n        dispatch(changeField({\r\n            key: 'piece',\r\n            value,\r\n        }))\r\n    }, [dispatch]);\r\n\r\n    const kind = white ? 'white': (black ? 'black' : null);\r\n    const checked = piece === kind;\r\n    \r\n    return (\r\n        <Icon\r\n            kind={kind}\r\n            checked={checked}\r\n            onClick={onClick}\r\n        />\r\n    )\r\n};\r\n\r\nexport default IconContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport SelectionContainer from '../../containers/game/SelectionContainer';\r\nimport SliderContainer from '../../containers/game/SliderContainer';\r\nimport IconContainer from '../../containers/game/IconContainer';\r\n\r\nconst CreationBlock = styled.form`\r\n    padding: 30px;\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    height: 400px;\r\n    background-color: white;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst TitleBlock = styled.div`\r\n    font-size: 24px;\r\n    font-weight: 700;\r\n`;\r\n\r\nconst SelectionBundleBlock = styled.div`\r\n    margin-top: 40px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n`;\r\n\r\nconst SliderBundleBlock = styled.div`\r\n    margin-top: 20px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n`;\r\n\r\nconst IconBundleBlock = styled.div`\r\n    position: relative;\r\n    height: 60px;\r\n    margin-top: 20px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-around;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst SubmitBlock = styled.div`\r\n    margin-top: 30px;\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    width: 100%;\r\n`;\r\n\r\nconst ConfirmFrameBlock = styled.div`\r\n    position: relative;\r\n    width: 65px;\r\n    height: 40px;\r\n`;\r\n\r\nconst ConfirmBlock = styled.button`\r\n    cursor: pointer;\r\n    position: absolute;\r\n    border: none;\r\n    outline: none;\r\n    margin: 0;\r\n    padding: 0;\r\n    font-size: 20px;\r\n    font-weight: 700;\r\n    top: 0px;\r\n    left: 0px;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    width: 65px;\r\n    height: 40px;\r\n    color: rgba(0, 0, 0, 0.3);\r\n    transition: 0.5s;\r\n    background-color: transparent;\r\n\r\n    @keyframes jump {\r\n        0%, 100% {\r\n            top: 0;\r\n        }\r\n        50% {\r\n            top: -3px;\r\n        }\r\n    }\r\n\r\n    &:hover {\r\n        animation: jump 0.5s 1;\r\n        color: rgba(0, 0, 0, 0.6);\r\n    }\r\n`;\r\n\r\nconst NameBlock = styled.div`\r\n    position: absolute;\r\n    top: -10px;\r\n    left: 70%;\r\n    width: 30%;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n    color: rgba(0,0,0,0.3);\r\n`\r\n\r\nconst Creation = ({ onSubmit }) => {\r\n    return (\r\n        <CreationBlock onSubmit={onSubmit}>\r\n            <TitleBlock>\r\n                New Game\r\n            </TitleBlock>\r\n            <SelectionBundleBlock>\r\n                <SelectionContainer kind='map' />\r\n                <SelectionContainer kind='mode' />\r\n            </SelectionBundleBlock>\r\n            <SliderBundleBlock>\r\n                <SliderContainer kind='defaultTime'/>\r\n                <SliderContainer kind='extraTime'/>\r\n            </SliderBundleBlock>\r\n            <IconBundleBlock>\r\n                <NameBlock>\r\n                    Piece\r\n                </NameBlock>\r\n                <IconContainer white/>\r\n                <IconContainer black/>\r\n            </IconBundleBlock>\r\n            <SubmitBlock>\r\n                <ConfirmFrameBlock>\r\n                    <ConfirmBlock type='submit' >\r\n                        Create\r\n                    </ConfirmBlock>\r\n                </ConfirmFrameBlock>\r\n            </SubmitBlock>\r\n        </CreationBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(Creation);","import { createAction, handleActions } from 'redux-actions';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\n\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\r\nimport * as gamesCtrl from '../lib/api/games';\r\n\r\nconst CONNECT_WEBSOCKET = 'games/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'games/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_VALUE = 'games/INITIALIZE_VALUE';\r\nconst INITIALIZE_SOCKET = 'games/INITIALIZE_SOCKET';\r\nconst CLEAR_VALUE = 'games/CLEAR_VALUE';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\nexport const clearValue = createAction(CLEAR_VALUE);\r\n\r\nconst [ CREATE_GAME, CREATE_GAME_SUCCESS, CREATE_GAME_FAILURE ] = createRequestActionTypes('games/CREATE_GAME');\r\nexport const createGameThunk = createRequestThunk(CREATE_GAME, gamesCtrl.createGame);\r\n\r\nfunction* connectWebsocketSaga () {\r\n    const socketTask = yield fork(connectNamespace, { \r\n        url: '/games',\r\n        initializeSocket,\r\n        initializeValue,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* gamesSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    games: null,\r\n    error: null,\r\n}\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { games }}) => ({\r\n        ...state,\r\n        games,\r\n    }),\r\n    [CLEAR_VALUE]: state => initialState,\r\n    [CREATE_GAME_SUCCESS]: state => state,\r\n    [CREATE_GAME_FAILURE]: (state, { payload: error }) => ({\r\n        ...state,\r\n        error,\r\n    }),\r\n}, initialState);","import axios from 'axios';\r\n\r\n//  REST API \r\n\r\nexport const createGame = params =>\r\n    axios.post('/api/games', params);","import React, { useCallback, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\n\r\nimport Creation from '../../components/game/Creation';\r\nimport { clearField } from '../../modules/create';\r\nimport { createGameThunk } from '../../modules/games';\r\n\r\nconst CreationContainer = ({ history }) => {\r\n    const { map, mode, defaultTime, extraTime, piece } = useSelector(({ create }) => ({\r\n        map: create.map,\r\n        mode: create.mode,\r\n        defaultTime: create.defaultTime,\r\n        extraTime: create.extraTime,\r\n        piece: create.piece,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const onSubmit = useCallback(e => {\r\n        e.preventDefault();\r\n        (async() => {\r\n            const key = await dispatch(createGameThunk({\r\n                map,\r\n                mode,\r\n                defaultTime,\r\n                extraTime,\r\n                piece\r\n            }));\r\n            console.dir(piece);\r\n            history.push(`/game/${key}`);\r\n        })();\r\n    }, [dispatch, history, map, mode, defaultTime, extraTime, piece]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearField());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <Creation onSubmit={onSubmit}/>\r\n    )\r\n};\r\n\r\nexport default withRouter(CreationContainer);","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\n\r\nimport GridLayoutContainer from '../../containers/game/GridLayoutContainer';\r\nimport SummaryContainer from '../../containers/game/SummaryContainer';\r\nimport CreationContainer from '../../containers/game/CreationContainer';\r\n\r\nconst GameLayoutBlock = styled.div`\r\n    height: 800px;\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n`;\r\n\r\nconst sideBlockStyle = css`\r\n    height: 90%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    width: 20%;\r\n`;\r\n\r\nconst LeftSideBlock = styled.div`\r\n    ${sideBlockStyle}\r\n    margin-right: 1%;\r\n`;\r\n\r\nconst RightSideBlock = styled.div`\r\n    ${sideBlockStyle}\r\n    margin-left: 1%;\r\n`;\r\n\r\nconst GameLayout = () => {\r\n    return (\r\n        <>\r\n            <GameLayoutBlock>\r\n                <LeftSideBlock>\r\n                    <SummaryContainer />\r\n                </LeftSideBlock>\r\n                <GridLayoutContainer />\r\n                <RightSideBlock>\r\n                    <CreationContainer />\r\n                </RightSideBlock>\r\n            </GameLayoutBlock>          \r\n        </>\r\n    )\r\n};\r\n\r\nexport default React.memo(GameLayout);","import React, { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport useAsync from '../../lib/hook/useAsync';\r\nimport { setSessionThunk } from '../../modules/auth';\r\nimport GameLayout from '../../components/game/GameLayout';\r\n\r\nimport { connectWebsocket, disconnectWebsocket, clearValue } from '../../modules/games';\r\n\r\nconst GameLayoutContainer = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const connection = async() => {\r\n        await dispatch(setSessionThunk());\r\n        \r\n        dispatch(disconnectWebsocket());\r\n        await Promise.resolve().then(() => {\r\n            dispatch(connectWebsocket());\r\n        });\r\n        return true;\r\n    };\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearValue());\r\n        }\r\n    }, [dispatch])\r\n\r\n    const [state] = useAsync(connection, [ dispatch ]);\r\n\r\n    const { loading, data, error } = state;\r\n\r\n    if(loading) return null;\r\n    if(error) return null;\r\n    if(data) {\r\n        return (\r\n            <GameLayout />\r\n        )\r\n    }\r\n    return null;\r\n};\r\n\r\nexport default GameLayoutContainer;","import React from 'react';\r\nimport { Helmet } from 'react-helmet-async';\r\n\r\nimport GameLayoutContainer from '../containers/game/GameLayoutContainer';\r\nimport HeaderContainer from '../containers/common/HeaderContainer';\r\n\r\nconst GamePage = () => {\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>Game  Chesssup.com</title>\r\n            </Helmet>\r\n            <HeaderContainer />\r\n            <GameLayoutContainer />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default GamePage;","import { createAction, handleActions } from 'redux-actions';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\n\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\nimport createRequestThunk, { createRequestActionTypes } from '../lib/createRequestThunk';\r\nimport * as chatAPI from '../lib/api/chat';\r\n\r\nconst CONNECT_WEBSOCKET = 'chat/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'chat/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET, payload => payload);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_SOCKET = 'chat/INITIALIZE_SOCKET';\r\nconst INITIALIZE_VALUE = 'chat/INITIALIZE_VALUE';\r\nconst CHANGE_VALUE = 'chat/CHANGE_VALUE';\r\nconst CLEAR_VALUE = 'chat/CLEAR_VALUE'\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\r\nexport const clearValue = createAction(CLEAR_VALUE);\r\n\r\nconst CHANGE_TEXTFIELD = 'chat/CHANGE_TEXTFIELD';\r\nconst INITIALIZE_TEXTFIELD = 'chat/INITIALIZE_TEXTFIELD';\r\nexport const changeTextfield = createAction(CHANGE_TEXTFIELD, payload => payload);\r\nexport const initializeTextfield = createAction(INITIALIZE_TEXTFIELD);\r\n\r\nconst [ SEND_MESSAGE, SEND_MESSAGE_SUCCESS, SEND_MESSAGE_FAILURE ] = createRequestActionTypes('chat/SEND_MESSAGE');\r\nexport const sendMessageThunk = createRequestThunk(SEND_MESSAGE, chatAPI.sendMessage);\r\n\r\nfunction* connectWebsocketSaga (action) {\r\n    const key = action.payload;\r\n\r\n    const query = `key=${key}`;\r\n    \r\n    const socketTask = yield fork(connectNamespace, {\r\n        url: '/chat',\r\n        initializeSocket,\r\n        initializeValue,\r\n        changeValue,\r\n        query,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* chatSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    messages: [],\r\n    text: '',\r\n};\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { nickname, color, message }}) => ({\r\n        ...state,\r\n        messages: [{ nickname, color, message }],\r\n    }),\r\n    [CHANGE_VALUE]: (state, { payload: { nickname, color, message} }) => ({\r\n        ...state,\r\n        messages: [ ...state.messages, { nickname, color, message} ],\r\n    }),\r\n    [SEND_MESSAGE_SUCCESS]: state => state,\r\n    [SEND_MESSAGE_FAILURE]: state => state,\r\n    [INITIALIZE_TEXTFIELD]: state => ({\r\n        ...state,\r\n        text: '',\r\n    }),\r\n    [CHANGE_TEXTFIELD]: (state, { payload: text}) => ({\r\n        ...state,\r\n        text,\r\n    }),\r\n    [CLEAR_VALUE]: state => initialState,\r\n}, initialState);","import axios from 'axios';\r\n\r\nexport const sendMessage = message =>\r\n    axios.post('/api/chat/sendMessage', message);\r\n    \r\n// export const sendMessage = message =>\r\n//     axios.post('http://localhost:5000/api/chat/sendMessage', message);","import React, { useRef, useEffect } from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { IoIosSend } from 'react-icons/io';\r\nimport { IconContext } from 'react-icons';\r\n\r\nconst ChatSubmitBlock = styled.form`\r\n    width: 100%;\r\n`;\r\n\r\nconst ChatFrameBlock = styled.div`\r\n    position: relative;\r\n    background-color: white;\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst ChatHiddenBlock = styled.div`\r\n    height: 360px;\r\n    width: 100%;\r\n    overflow: hidden;\r\n`;\r\n\r\nconst ChatBlock = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    height: 360px;\r\n    width: 100%;\r\n    padding-right: 20px;\r\n    overflow-y: overlay;\r\n`;\r\n\r\nconst ChatFormBlock = styled.div`\r\n    position: absolute;\r\n    width: 100%;\r\n    display: flex;\r\n    background-color: white;\r\n    top: 365px;\r\n    /* box-shadow: rgba(0,0,0,0.05) 0px -2px 2px 0px, rgba(0,0,0,0.08) 0px -3px 1px -2px, rgba(0,0,0,0.04) 0px -1px 5px 0px; */\r\n    box-shadow: rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.2) 0px 3px 1px -2px, rgba(0, 0, 0, 0.12) 0px 1px 5px 0px;\r\n`;\r\n\r\nconst ChatInputBlock = styled.input`\r\n    outline: none;\r\n    border: none;\r\n    align-items : center;\r\n    color: black;\r\n    background-color: transparent;\r\n    font-size: 12px;\r\n    width: 80%;\r\n    height : 30px;\r\n    padding-left: 10px;\r\n`;\r\n\r\nconst ChatButtonBlock = styled.button`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 20%;\r\n    font-size: 12px;\r\n    background-color: rgb(247,246,245);\r\n    border: none;\r\n    cursor: pointer;\r\n\r\n    &:hover, &:focus {\r\n        background-color: #D3D3D3;\r\n    } \r\n`;\r\n\r\nconst MessageBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    width: 90%;\r\n    height : 36px;\r\n    min-height : 36px;\r\n    font-size : 12px;\r\n    background-color: white;\r\n\r\n    ${props => props.owner === 'my' && css`\r\n        justify-content: flex-end;\r\n    `};\r\n\r\n    ${props => props.owner === 'other' && css`\r\n        justify-content: flex-start;\r\n    `};\r\n\r\n    ${props => props.owner === 'server' && css`\r\n        justify-content: center;\r\n    `};\r\n`;\r\n\r\nconst BalloonBlock = styled.div`\r\n    position: relative;\r\n    background: #ffff80;\r\n    padding: 5px;\r\n\r\n    &:after {\r\n        content: '';\r\n        position: absolute;\r\n        right: 0;\r\n        top: 50%;\r\n        width: 0;\r\n        height: 0;\r\n        border: 8px solid transparent;\r\n        border-left-color: #ffff80;\r\n        border-right: 0;\r\n        border-top: 0;\r\n        margin-top: -5px;\r\n        margin-right: -8px;\r\n    }\r\n\r\n    \r\n    ${props => props.owner === 'other' && css `\r\n        background: rgb(247,246,245);\r\n\r\n        &:after {\r\n            content: '';\r\n            position: absolute;\r\n            left: 0;\r\n            top: 50%;\r\n            width: 0;\r\n            height: 0;\r\n            border: 8px solid transparent;\r\n            border-top: 0;\r\n            margin-top: -5px;\r\n            border-right-color: rgb(247,246,245);\r\n            border-left: 0;\r\n            margin-left: -8px;\r\n        }\r\n    `}\r\n`;\r\n\r\nconst Balloon = ({ owner, children }) => {\r\n    let ballonBlock;\r\n    if(owner === 'my') {\r\n        ballonBlock = (\r\n            <BalloonBlock owner={owner}>\r\n                {children}\r\n            </BalloonBlock>\r\n        )\r\n    } else if(owner === 'other') {\r\n        ballonBlock = (\r\n            <BalloonBlock owner={owner}>\r\n                {children}\r\n            </BalloonBlock>\r\n        )\r\n    } else if(owner === 'server') {\r\n        ballonBlock = (\r\n            <>\r\n                {children}\r\n            </>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {ballonBlock}\r\n        </>\r\n    )\r\n}\r\n\r\nconst Message = React.memo(({ message, myName, ...rest }) => {\r\n    const owner = message.nickname ? (message.nickname === myName ? 'my' : 'other') : 'server';\r\n    const text = owner === 'other' ? message.nickname + ' : ' + message.message : message.message;\r\n\r\n    return (\r\n        <MessageBlock\r\n            {...rest} \r\n            color={message.color}\r\n            owner={owner}\r\n        >\r\n            <Balloon owner={owner}>\r\n                {text}\r\n            </Balloon>\r\n        </MessageBlock>\r\n    )\r\n});\r\n\r\nconst Chat = ({ messages, onSubmit, onChange, text, tempAuth }) => {\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current.scrollTop = ref.current.scrollHeight;\r\n    }, [messages]);\r\n\r\n    let myName = '';\r\n    if(tempAuth) {\r\n        myName = tempAuth.nickname;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <ChatSubmitBlock onSubmit={onSubmit}>\r\n                <ChatFrameBlock>\r\n                    <ChatHiddenBlock>\r\n                        <ChatBlock ref={ref}>\r\n                            {messages.map(message => (\r\n                                <Message\r\n                                    myName={myName}\r\n                                    message={message}\r\n                                />\r\n                            ))}\r\n                        </ChatBlock>\r\n                    </ChatHiddenBlock>\r\n                    <ChatFormBlock>\r\n                        <ChatInputBlock\r\n                            onChange={onChange}\r\n                            value={text}\r\n                        />\r\n                        <ChatButtonBlock\r\n                            onSubmit={onSubmit}\r\n                        >\r\n                            <IconContext.Provider value={{style: { width:'40%', height:'40%' }}}>\r\n                                <IoIosSend />\r\n                            </IconContext.Provider>\r\n                        </ ChatButtonBlock>\r\n                    </ChatFormBlock>\r\n                </ChatFrameBlock>\r\n            </ChatSubmitBlock>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default React.memo(Chat);","import React, { useEffect, useCallback } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { changeTextfield, initializeTextfield } from '../../modules/chat';\r\nimport { sendMessageThunk, clearValue } from '../../modules/chat';\r\nimport Chat from '../../components/gameplay/Chat';\r\n\r\nconst ChatContainer = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const { socket, messages, text, tempAuth } = useSelector(({ chat, auth }) => ({\r\n        socket: chat.socket,\r\n        messages: chat.messages,\r\n        text: chat.text,\r\n        tempAuth: auth.tempAuth,\r\n    }));\r\n\r\n    const onSubmit = useCallback(e => {\r\n        e.preventDefault();\r\n        dispatch(sendMessageThunk({ socket, message: text }));\r\n        dispatch(initializeTextfield());\r\n    }, [dispatch, text, socket]);\r\n\r\n    const onChange = useCallback(e => {\r\n        dispatch(changeTextfield(e.target.value));\r\n    },[dispatch]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearValue());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    return (\r\n        <Chat\r\n            messages={messages}\r\n            onSubmit={onSubmit}\r\n            onChange={onChange}\r\n            text={text}\r\n            tempAuth={tempAuth}\r\n        />\r\n    )\r\n};\r\n\r\nexport default ChatContainer;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\n\r\nconst TimerBlock = styled.div`\r\n    width: 50%;\r\n    height: 60px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n    background-color: white;\r\n    ${props => props.color && css`\r\n        background-color: rgb(208, 224, 189);\r\n    `}\r\n    ${props => props.time <= 10000 && css`\r\n        background-color: rgb(230, 153, 153);\r\n    `}\r\n`;\r\n\r\nconst TimeSliceBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 100%;\r\n    width: 47%;\r\n    color: black;\r\n    font-size: 50px;\r\n`;\r\n\r\nconst ColonBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: flex-end;\r\n    height: 100%;\r\n    width: 6%;\r\n    color: black;\r\n    opacity: 0.5;\r\n    font-size: 50px;\r\n`;\r\n\r\nconst timeConverter = timeSlice => {\r\n    let convertedTime = '';\r\n    convertedTime += String(Math.floor(timeSlice / 10));\r\n    convertedTime += String(Math.floor(timeSlice % 10));\r\n    return convertedTime;\r\n}\r\n\r\nconst Timer = ({ time, color }) => {\r\n    \r\n    const minute = Math.floor(time / 60000);\r\n    const second = Math.floor((time % 60000) / 1000);\r\n\r\n    // eslint-disable-next-line\r\n    if(time == undefined || time === null) {\r\n        return <TimerBlock />\r\n    }\r\n\r\n    return (\r\n        <TimerBlock\r\n            time={time}\r\n            color={color ? 1 : 0}\r\n        >\r\n            <TimeSliceBlock>\r\n                {timeConverter(minute)}\r\n            </TimeSliceBlock>\r\n            <ColonBlock>\r\n                :\r\n            </ColonBlock>\r\n            <TimeSliceBlock>\r\n                {timeConverter(second)}\r\n            </TimeSliceBlock>\r\n        </TimerBlock>\r\n    )\r\n}\r\n\r\nexport default Timer;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport Timer from '../../components/gameplay/Timer';\r\n\r\nconst TimerContainer = ({ white }) => {\r\n\r\n    const { whiteTime, blackTime, start, order } = useSelector(({ record, game }) => ({\r\n        whiteTime: record.whiteTime,\r\n        blackTime: record.blackTime,\r\n        start: game.start,\r\n        order: game.order,\r\n    }));\r\n\r\n    const time = white ? whiteTime : blackTime;\r\n    const color = white ? (start && order === 'white') : (start && order === 'black');\r\n\r\n    return (\r\n        <Timer\r\n          time={time}\r\n          color={color}\r\n        />\r\n    )\r\n    \r\n};\r\n\r\nexport default TimerContainer;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport { IconContext } from 'react-icons';\r\nimport { FaCircle, FaRegCircle } from 'react-icons/fa';\r\n\r\nconst StatusBlock = styled.div`\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 30px;\r\n    background-color: white;\r\n\r\n    ${props => props.beneath && css`\r\n        margin-top: 30px;\r\n    `}\r\n`;\r\n\r\nconst NameBlock = styled.div`\r\n    font-size: 20px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n`\r\n\r\nconst Status = ({ light, name, beneath }) => {\r\n    const iconStyle = {\r\n        style: {\r\n            height: '15px',\r\n            width: '10%',\r\n            color: 'green',\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n        }\r\n    };\r\n\r\n    return (\r\n        <StatusBlock beneath={beneath ? 1 : 0}>\r\n            {light\r\n                ? (\r\n                    <IconContext.Provider value={iconStyle}>\r\n                        <FaCircle />\r\n                    </IconContext.Provider>\r\n                )\r\n                : (\r\n                    <IconContext.Provider value={{ style: { ...iconStyle.style, color: 'black' }}}>\r\n                        <FaRegCircle />\r\n                    </IconContext.Provider>\r\n                )\r\n            }\r\n            <NameBlock>\r\n                {name}\r\n            </NameBlock>\r\n        </StatusBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(Status);","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport Status from '../../components/gameplay/Status';\r\n\r\nconst StatusContainer = ({ black, white, beneath }) => {\r\n    const { blackNick, whiteNick, participant } = useSelector(({ game }) => ({\r\n        blackNick: game.black,\r\n        whiteNick: game.white,\r\n        participant: game.participant,\r\n    }));\r\n\r\n    const participantSet = new Set(participant);\r\n    const light = (white && participantSet.has(whiteNick)) || (black && participantSet.has(blackNick));\r\n    const name = (white && whiteNick) || (black && blackNick);\r\n\r\n    return (\r\n        <Status\r\n            light={light}\r\n            name={name}\r\n            beneath={beneath}\r\n        />\r\n    )\r\n};\r\n\r\nexport default StatusContainer;","import React, { useRef, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { IconContext } from 'react-icons';\r\nimport { IoIosArrowRoundForward } from 'react-icons/io';\r\nimport { pieceMapper } from '../../lib/base/pieceConverter';\r\n\r\nconst PieceMoveListHiddenBlock = styled.div`\r\n    height: 270px;\r\n    width: 100%;\r\n    overflow: hidden;\r\n`;\r\n\r\nconst PieceMoveListBlock = styled.div`\r\n    height: 270px;\r\n    width: 100%;\r\n    overflow-y: overlay;\r\n    padding-right: 20px;\r\n`;\r\n\r\nconst PieceMoveBlock = styled.div`\r\n    width: 100%;\r\n    height: 30px;\r\n    background-color: white;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    cursor: pointer;\r\n\r\n    &:first-child {\r\n        margin-top: 30px;\r\n    }\r\n`;\r\n\r\nconst moveConverter = ({x, y}) => {\r\n    return String.fromCharCode(97 + x) + (8 - y);\r\n}\r\n\r\nconst MoveBlock = styled.div`\r\n    width: 80%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    cursor: pointer;\r\n    &:hover {\r\n        background-color: rgb(209, 228, 246);\r\n    }\r\n`;\r\n\r\nconst TextBlock = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 20%;\r\n    font-size: 18px;\r\n`\r\n\r\nconst IndexBlock = styled.div`\r\n    width: 20%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    font-size: 18px;\r\n    background-color: rgb(247, 246, 245);\r\n`\r\n\r\nconst PieceMove = React.memo(({ move, index, onClickBlock }) => {\r\n    console.dir('PieceMove');\r\n    console.dir(move);\r\n    const PrevComponent = pieceMapper[move.prevPiece.piece];\r\n    const prevStyle = {\r\n        color: move.prevPiece.owner,\r\n        style: {\r\n            width: '10%',\r\n            filter: `drop-shadow(1px 1px 1px ${move.prevPiece.owner === 'white' ? 'black' : 'white'})`,\r\n        }\r\n    };\r\n\r\n    const prevPiece = (\r\n        <IconContext.Provider value={prevStyle}>\r\n            <PrevComponent />\r\n        </IconContext.Provider>\r\n    )\r\n\r\n    let NextComponent, nextStyle;\r\n\r\n    let nextPiece = (\r\n        <div style={{ width: '10%' }}/>\r\n    )\r\n\r\n    if(move.nextPiece.piece) {\r\n        NextComponent = pieceMapper[move.nextPiece.piece];\r\n        nextStyle = {\r\n            color: move.nextPiece.owner,\r\n            style: {\r\n                width: '10%',\r\n                filter: `drop-shadow(1px 1px 1px ${move.nextPiece.owner === 'white' ? 'black' : 'white'})`,\r\n            }\r\n        };\r\n        nextPiece = (\r\n            <IconContext.Provider value={nextStyle}>\r\n                <NextComponent />\r\n            </IconContext.Provider>\r\n        )\r\n    }\r\n\r\n    \r\n    return (\r\n        <PieceMoveBlock>\r\n            <IndexBlock>\r\n                {index + 1}\r\n            </IndexBlock>\r\n            <MoveBlock onClick={onClickBlock}>\r\n                {prevPiece}\r\n                <TextBlock>\r\n                    {moveConverter(move.prev)}\r\n                </TextBlock>\r\n                <IconContext.Provider value={{ style: { color: 'rgb(169,169,169)' }}}>\r\n                    <IoIosArrowRoundForward />\r\n                </IconContext.Provider>\r\n                <TextBlock>\r\n                    {moveConverter(move.next)}\r\n                </TextBlock>\r\n                {nextPiece}\r\n            </MoveBlock>\r\n        </PieceMoveBlock>\r\n    )\r\n});\r\n\r\n\r\nconst PieceMoveList = ({ pieceMove, onClickBlock }) => {\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n        ref.current.scrollTop = ref.current.scrollHeight;\r\n    }, [pieceMove]);\r\n\r\n    return (\r\n        <PieceMoveListHiddenBlock>\r\n            <PieceMoveListBlock ref={ref}>\r\n                {pieceMove.map((move, index) => (\r\n                    <PieceMove \r\n                        onClick={onClickBlock}\r\n                        move={move}\r\n                        index={index}\r\n                    />\r\n                ))}\r\n            </PieceMoveListBlock>\r\n        </PieceMoveListHiddenBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(PieceMoveList);","import React, { useCallback } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport PieceMoveList from '../../components/gameplay/PieceMoveList';\r\n\r\nconst PieceMoveListContainer = () => {\r\n    \r\n    // const dispatch = useDispatch();\r\n\r\n    const { pieceMove } = useSelector(({ record }) => ({\r\n        pieceMove: record.pieceMove,\r\n    }));\r\n\r\n    const onClickBlock = useCallback(() => {\r\n\r\n    }, []);\r\n\r\n    return (\r\n        <PieceMoveList\r\n            onClickBlock = {onClickBlock}\r\n            pieceMove={pieceMove}\r\n        />\r\n    )\r\n};\r\n\r\nexport default PieceMoveListContainer;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\n\r\nconst TimeLineBlock = styled.div`\r\n    position: absolute;\r\n    height: 2px;\r\n    background-color: green;\r\n    transition-duration: 1s;\r\n    transition-timing-function: linear;\r\n\r\n    width: ${props => (props.time * 100) + '%'};\r\n    ${props => props.time <= 0.1 && css`\r\n        background-color: red;\r\n    `}\r\n`;\r\n\r\nconst TimeLine = ({ time }) => {\r\n    return (\r\n        <TimeLineBlock time={time}/>\r\n    )\r\n};\r\n\r\nexport default React.memo(TimeLine);","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport TimeLine from '../../components/gameplay/TimeLine';\r\n\r\nconst TimeLineContainer = ({ white, black }) => {\r\n    const { whiteRatio, blackRatio, whiteNick, blackNick, participant } = useSelector(({ record, game }) => ({\r\n        whiteRatio: record.whiteRatio,\r\n        blackRatio: record.blackRatio,\r\n        whiteNick: game.white,\r\n        blackNick: game.black,\r\n        participant: game.participant,\r\n    }));\r\n\r\n    const participantSet = new Set(participant);\r\n    let time = 0;\r\n\r\n    if((white && participantSet.has(whiteNick)) || (black && participantSet.has(blackNick))) {\r\n        time = white ? whiteRatio : blackRatio;\r\n    }\r\n \r\n    time = Math.min(time, 1);\r\n\r\n    return (\r\n        <TimeLine\r\n            time={time}\r\n        />\r\n    )\r\n};\r\n\r\nexport default TimeLineContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { FaFastBackward, FaStepBackward, FaFastForward, FaStepForward } from 'react-icons/fa';\r\nimport { IconContext } from 'react-icons';\r\n\r\nconst UndoRedoBlock = styled.div`\r\n    position: absolute;\r\n    top: 300px;\r\n    display: flex;\r\n    width: 100%;\r\n    height: 30px;\r\n    background-color: rgb(247, 246, 245);\r\n    z-index: 10;\r\n    box-shadow: rgba(0, 0, 0, 0.14) 0px -2px 2px 0px, rgba(0, 0, 0, 0.2) 0px -3px 1px -2px, rgba(0, 0, 0, 0.12) 0px -1px 5px 0px;\r\n`;\r\n\r\nconst ButtonBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 25%;\r\n    height: 100%;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        background-color: #D3D3D3;\r\n    }\r\n`;\r\n\r\nconst buttonStyle = {\r\n    style: {\r\n        color: '#4d4d4d',\r\n        width: '50%',\r\n        height: '50%',\r\n        backgroundColor: 'transparent'\r\n    }\r\n}\r\n\r\nconst UndoRedo = () => {\r\n    return (\r\n        <UndoRedoBlock>\r\n            <ButtonBlock>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaFastBackward />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n            <ButtonBlock>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaStepBackward />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n            <ButtonBlock>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaStepForward />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n            <ButtonBlock>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaFastForward />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n        </UndoRedoBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(UndoRedo);","import React from 'react';\r\nimport UndoRedo from '../../components/gameplay/UndoRedo';\r\n\r\nconst UndoRedoContainer = () => {\r\n    \r\n    return (\r\n        <UndoRedo />\r\n    )\r\n};\r\n\r\nexport default UndoRedoContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { FaExchangeAlt, FaFlag, FaHandRock } from 'react-icons/fa';\r\nimport { TiArrowBack } from 'react-icons/ti';\r\nimport { IconContext } from 'react-icons';\r\n\r\nconst UtilBlock = styled.div`\r\n    position: absolute;\r\n    top: 30px;\r\n    display: flex;\r\n    width: 100%;\r\n    height: 30px;\r\n    z-index: 10;\r\n    background-color: rgb(247, 246, 245);\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst ButtonBlock = styled.div`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 25%;\r\n    height: 100%;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        background-color: #D3D3D3;\r\n    }\r\n`;\r\n\r\nconst buttonStyle = {\r\n    style: {\r\n        color: '#4d4d4d',\r\n        width: '50%',\r\n        height: '50%',\r\n        backgroundColor: 'transparent'\r\n    }\r\n};\r\n\r\nconst Util = ({ onReverse }) => {\r\n    return (\r\n        <UtilBlock>\r\n            <ButtonBlock onClick={onReverse} >\r\n                <IconContext.Provider value={{ style: { ...buttonStyle.style, width: '60%', height:'60%' }} }>\r\n                    <FaExchangeAlt />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n            <ButtonBlock>\r\n                <IconContext.Provider value={{ style: { ...buttonStyle.style, width: '80%', height:'80%' }} }>\r\n                    <TiArrowBack />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n            <ButtonBlock>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaHandRock />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n            <ButtonBlock>\r\n                <IconContext.Provider value={buttonStyle}>\r\n                    <FaFlag />\r\n                </IconContext.Provider>\r\n            </ButtonBlock>\r\n        </UtilBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(Util);","import { createAction, handleActions } from 'redux-actions';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\n\r\nconst CONNECT_WEBSOCKET = 'record/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'record/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_VALUE = 'record/INITIALIZE_VALUE';\r\nconst INITIALIZE_SOCKET = 'record/INITIALIZE_SOCKET';\r\nconst CHANGE_VALUE = 'record/CHANGE_VALUE';\r\nconst UPDATE_VALUE = 'record/UPDATE_VALUE';\r\nconst CLEAR_VALUE = 'record/CLEAR_VALUE';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\nexport const changeValue = createAction(CHANGE_VALUE, payload => payload);\r\nexport const updateValue = createAction(UPDATE_VALUE, payload => payload);\r\nexport const clearValue = createAction(CLEAR_VALUE);\r\n\r\nconst CHANGE_REVERSE = 'record/CHANGE_REVERSE';\r\nexport const changeReverse = createAction(CHANGE_REVERSE, payload => payload);\r\n\r\nexport const updateValueThunk = params => ( dispatch, getState ) => {\r\n    const { record } = getState();\r\n    let newRecord = { ...record };\r\n    Object.keys(params).forEach(key => {\r\n        if(typeof params[key] === 'object') {\r\n            newRecord = {\r\n                ...newRecord,\r\n                [key]: [\r\n                    ...newRecord[key],\r\n                    params[key],\r\n                ]\r\n            };\r\n        }\r\n    });\r\n\r\n    dispatch(updateValue({ record: newRecord }));\r\n};\r\n\r\nfunction* connectWebsocketSaga (action) {\r\n    const key = action.payload;\r\n    \r\n    const query = `key=${key}`;\r\n\r\n    const socketTask = yield fork(connectNamespace, { \r\n        url: '/record',\r\n        initializeSocket,\r\n        initializeValue,\r\n        changeValue,\r\n        updateValue: updateValueThunk,\r\n        query,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* recordSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    error: null,\r\n    startTime: null,\r\n    endTime: null,\r\n    blackTime: null,\r\n    whiteTime: null,\r\n    blackMaxTime: null,\r\n    whiteMaxTime: null,\r\n    whiteRatio: 0,\r\n    blackRatio: 0,\r\n    pieceMove: [],\r\n    reversed: false,\r\n}\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest } }) => ({\r\n        ...state,\r\n        ...rest,\r\n    }),\r\n    [CHANGE_VALUE]: (state, { payload: { type, ...rest } }) => ({\r\n        ...state,\r\n        ...rest,\r\n    }),\r\n    [UPDATE_VALUE]: (state, { payload: { record } }) => ({\r\n        ...record,\r\n    }),\r\n    [CLEAR_VALUE]: state => initialState,\r\n    [CHANGE_REVERSE]: (state, { payload: { reversed } }) => ({\r\n        ...state,\r\n        reversed,\r\n    })\r\n}, initialState);\r\n","import React, { useCallback } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Util from '../../components/gameplay/Util';\r\nimport { changeReverse } from '../../modules/record';\r\n\r\nconst UtilContainer = () => {\r\n    const { reversed } = useSelector(({ record }) => ({\r\n        reversed: record.reversed,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n    \r\n    const onReverse = useCallback(() => {\r\n        dispatch(changeReverse({ reversed: !reversed }));\r\n    }, [dispatch, reversed]);\r\n\r\n    return (\r\n        <Util\r\n            onReverse={onReverse}\r\n        />\r\n    )\r\n};\r\n\r\nexport default UtilContainer;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport TimerContainer from '../../containers/gameplay/TimerContainer';\r\nimport StatusContainer from '../../containers/gameplay/StatusContainer';\r\nimport PieceMoveListContainer from '../../containers/gameplay/PieceMoveListContainer';\r\nimport TimeLineContainer from '../../containers/gameplay/TimeLineContainer';\r\nimport UndoRedoContainer from '../../containers/gameplay/UndoRedoContainer';\r\nimport UtilContainer from '../../containers/gameplay/UtilContainer';\r\n\r\nconst RecordBlock = styled.div`\r\n    position: relative;\r\n    width: 100%;\r\n    height: 360px;\r\n    background-color: white;\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst Record = ({ reversal }) => {\r\n    return (\r\n        <>\r\n            {reversal ? (\r\n                <>\r\n                    <TimerContainer white />\r\n                </>\r\n            ) : (\r\n                <>\r\n                    <TimerContainer black />\r\n                </>\r\n            )}\r\n            <RecordBlock>\r\n                {reversal ? (\r\n                    <>\r\n                        <TimeLineContainer white />\r\n                        <StatusContainer white />\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                        <TimeLineContainer black />\r\n                        <StatusContainer black />\r\n                    </>\r\n                )}\r\n                <UtilContainer />\r\n                <PieceMoveListContainer />\r\n                <UndoRedoContainer />\r\n                {reversal ? (\r\n                    <>\r\n                        <StatusContainer black beneath/>\r\n                        <TimeLineContainer black />\r\n                    </>\r\n                ) : (\r\n                    <>\r\n                        <StatusContainer white beneath/>\r\n                        <TimeLineContainer white />\r\n                    </>\r\n                )}\r\n                \r\n            </RecordBlock>\r\n            {reversal ? (\r\n                <>\r\n                    <TimerContainer black />\r\n                </>\r\n            ) : (\r\n                <>\r\n                    <TimerContainer white />\r\n                </>\r\n            )}\r\n        </>\r\n    )\r\n};\r\n\r\nexport default React.memo(Record);","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Record from '../../components/gameplay/Record';\r\nimport { clearValue } from '../../modules/record';\r\n\r\nconst RecordContainer = () => {\r\n    const { tempAuth, reversed } = useSelector(({ auth, record }) => ({\r\n        tempAuth: auth.tempAuth,\r\n        reversed: record.reversed,\r\n    }));\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearValue());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    let reversal = false;\r\n    if(tempAuth) {\r\n        if(((tempAuth.role === 'white' || tempAuth.role === 'spectator') && reversed) || (tempAuth.role === 'black' && !reversed)) {\r\n            reversal = true;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Record\r\n            reversal={reversal}\r\n        />\r\n    );\r\n};\r\n\r\nexport default RecordContainer;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\nimport CanvasContainer from '../../containers/gameplay/CanvasContainer';\r\nimport ChatContainer from '../../containers/gameplay/ChatContainer';\r\nimport RecordContainer from '../../containers/gameplay/RecordContainer';\r\n\r\nconst GamePlayLayoutBlock = styled.div`\r\n    height: 800px;\r\n    width: 100%;\r\n    background-color: rgb(237, 235, 233);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n`;\r\n\r\nconst sideBlockStyle = css`\r\n    height: 90%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    width: 20%;\r\n`;\r\n\r\nconst LeftSideBlock = styled.div`\r\n    ${sideBlockStyle}\r\n    margin-right: 1%;\r\n`;\r\n\r\nconst RightSideBlock = styled.div`\r\n    ${sideBlockStyle}\r\n    margin-left: 1%;\r\n`;\r\n\r\nconst GamePlayLayout = () => {\r\n    return (\r\n        <GamePlayLayoutBlock>\r\n            <LeftSideBlock>\r\n                <ChatContainer />\r\n            </LeftSideBlock>\r\n            <CanvasContainer />\r\n            <RightSideBlock>\r\n                <RecordContainer />\r\n            </RightSideBlock>\r\n        </GamePlayLayoutBlock>\r\n    )\r\n};\r\n\r\nexport default React.memo(GamePlayLayout);","import { createAction, handleActions } from 'redux-actions';\r\nimport { takeEvery, fork, take, cancel } from 'redux-saga/effects';\r\n\r\nimport { connectNamespace } from '../lib/websocket/websocket';\r\n\r\nconst CONNECT_WEBSOCKET = 'game/CONNECT_WEBSOCKET';\r\nconst DISCONNECT_WEBSOCKET = 'game/DISCONNECT_WEBSOCKET';\r\nexport const connectWebsocket = createAction(CONNECT_WEBSOCKET);\r\nexport const disconnectWebsocket = createAction(DISCONNECT_WEBSOCKET);\r\n\r\nconst INITIALIZE_VALUE = 'game/INITIALIZE_VALUE';\r\nconst INITIALIZE_SOCKET = 'game/INITIALIZE_SOCKET';\r\nconst CLEAR_VALUE = 'game/CLEAR_VALUE';\r\nexport const initializeSocket = createAction(INITIALIZE_SOCKET, payload => payload);\r\nexport const initializeValue = createAction(INITIALIZE_VALUE, payload => payload);\r\nexport const clearValue = createAction(CLEAR_VALUE)\r\n\r\nfunction* connectWebsocketSaga (action) {\r\n    const key = action.payload;\r\n    \r\n    const query = `key=${key}`;\r\n\r\n    const socketTask = yield fork(connectNamespace, { \r\n        url: '/game',\r\n        initializeSocket,\r\n        initializeValue,\r\n        query,\r\n    });\r\n    \r\n    yield take(DISCONNECT_WEBSOCKET);\r\n    yield cancel(socketTask);\r\n}\r\n\r\nexport function* gameSaga () {\r\n    yield takeEvery(CONNECT_WEBSOCKET, connectWebsocketSaga);\r\n}\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    error: null,\r\n    participant: [],\r\n};\r\n\r\nexport default handleActions({\r\n    [INITIALIZE_SOCKET]: (state, { payload: { socket } }) => ({\r\n        ...state,\r\n        socket,\r\n    }),\r\n    [INITIALIZE_VALUE]: (state, { payload: { type, ...rest }}) => ({\r\n        ...state,\r\n        ...rest,\r\n    }),\r\n    [CLEAR_VALUE]: state => initialState,\r\n}, initialState);","import React, { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport useAsync from '../../lib/hook/useAsync';\r\nimport GamePlayLayout from '../../components/gameplay/GamePlayLayout';\r\nimport { setSessionThunk } from '../../modules/auth';\r\n\r\nimport { clearValue as clearAuthValue } from '../../modules/auth';\r\nimport { clearValue as clearGameValue } from '../../modules/game';\r\n\r\nimport { connectWebsocket as connectAuthWebsocket } from '../../modules/auth';\r\nimport { connectWebsocket as connectGameWebsocket } from '../../modules/game';\r\nimport { connectWebsocket as connectChatWebsocket } from '../../modules/chat';\r\nimport { connectWebsocket as connectCanvasWebsocket} from '../../modules/canvas';\r\nimport { connectWebsocket as connectRecordWebsocket } from '../../modules/record';\r\n\r\nimport { disconnectWebsocket as disconnectAuthWebsocket } from '../../modules/auth';\r\nimport { disconnectWebsocket as disconnectGameWebsocket } from '../../modules/game';\r\nimport { disconnectWebsocket as disconnectChatWebsocket } from '../../modules/chat';\r\nimport { disconnectWebsocket as disconnectCanvasWebsocket } from '../../modules/canvas';\r\nimport { disconnectWebsocket as disconnectRecordWebsocket } from '../../modules/record';\r\n\r\nconst GamePlayLayoutContainer = ({ gameId }) => {\r\n    const dispatch = useDispatch();\r\n\r\n    const connection = async () => {\r\n        await dispatch(setSessionThunk());\r\n      \r\n        dispatch(disconnectAuthWebsocket());\r\n        dispatch(disconnectGameWebsocket());\r\n        dispatch(disconnectChatWebsocket());\r\n        dispatch(disconnectCanvasWebsocket());\r\n        dispatch(disconnectRecordWebsocket());\r\n        await Promise.resolve().then(() => {\r\n            dispatch(connectAuthWebsocket(gameId));\r\n            dispatch(connectGameWebsocket(gameId));\r\n            dispatch(connectChatWebsocket(gameId));\r\n            dispatch(connectCanvasWebsocket(gameId));\r\n            dispatch(connectRecordWebsocket(gameId));\r\n        })\r\n        return true;\r\n    };\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(disconnectAuthWebsocket());\r\n            dispatch(disconnectGameWebsocket());\r\n            dispatch(disconnectChatWebsocket());\r\n            dispatch(disconnectCanvasWebsocket());\r\n            dispatch(disconnectRecordWebsocket());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            dispatch(clearAuthValue());\r\n            dispatch(clearGameValue());\r\n        }\r\n    }, [dispatch]);\r\n\r\n    const [state] = useAsync(connection, [ dispatch, gameId ]);\r\n\r\n    const { loading, data, error } = state;\r\n\r\n    if(loading) return null;\r\n    if(error) return null;\r\n    if(data) {\r\n        return (\r\n            <GamePlayLayout />\r\n        )\r\n    }\r\n    return null;\r\n};\r\n\r\nexport default GamePlayLayoutContainer;","import React, { useEffect } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Helmet } from 'react-helmet-async';\r\n\r\nimport HeaderContainer from '../containers/common/HeaderContainer';\r\nimport GamePlayLayoutContainer from '../containers/gameplay/GamePlayLayoutContainer';\r\n\r\nconst GamePlayPage = ({ history, match }) => {\r\n    useEffect(() => {\r\n        if(!match.params.id) {\r\n            history.push('/');\r\n        }\r\n    }, [history, match]);\r\n\r\n    if(!match.params.id) return null;\r\n    const { id } = match.params;\r\n    if(!id) return null;\r\n    \r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>GamePlay  Chesssup.com</title>\r\n            </Helmet>\r\n            <HeaderContainer />\r\n            <GamePlayLayoutContainer gameId={id}/>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default withRouter(GamePlayPage);","import React from 'react';\r\n\r\nconst GamePlayCanvasPage = () => {\r\n    return (\r\n        <>\r\n\r\n        </>\r\n    )\r\n};\r\n\r\nexport default GamePlayCanvasPage;","export default [\r\n    {\r\n        title: '   1',\r\n        count: 250,\r\n        comments: 7,\r\n        time: '1 '\r\n    },\r\n    {\r\n        title: '   2',\r\n        count: 251,\r\n        comments: 8,\r\n        time: '2 '\r\n    },\r\n    {\r\n        title: '   3',\r\n        count: 252,\r\n        comments: 9,\r\n        time: '3 '\r\n    },\r\n    {\r\n        title: '   4',\r\n        count: 253,\r\n        comments: 10,\r\n        time: '4 '\r\n    },\r\n    {\r\n        title: '   1',\r\n        count: 250,\r\n        comments: 7,\r\n        time: '1 '\r\n    },{\r\n        title: '   1',\r\n        count: 250,\r\n        comments: 7,\r\n        time: '1 '\r\n    },{\r\n        title: '   1',\r\n        count: 250,\r\n        comments: 7,\r\n        time: '1 '\r\n    },{\r\n        title: '   1',\r\n        count: 250,\r\n        comments: 7,\r\n        time: '1 '\r\n    },{\r\n        title: '   1',\r\n        count: 250,\r\n        comments: 7,\r\n        time: '1 '\r\n    },{\r\n        title: '   1',\r\n        count: 250,\r\n        comments: 7,\r\n        time: '1 '\r\n    }\r\n]","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nconst CommunityTableRowBlock = styled.div`\r\n    display:flex;\r\n    flex-direction: row;\r\n    justify-content:center;\r\n    width: 100%;\r\n    transition-duration:0.1s;\r\n    &:nth-child(odd) {\r\n        background: #F7F6F4;\r\n    }\r\n    &:hover {\r\n            background: #add8e6;\r\n            cursor:pointer;\r\n        }\r\n`;\r\n\r\nconst CellBlock = styled.div`\r\n    width: ${props => props.width ? props.width : \"20%\"};\r\n    height: 50px; \r\n    display:flex;\r\n    justify-content:center;\r\n    align-items:center;\r\n    font-size: 15px;\r\n`;\r\n\r\nconst CellTextBlock = styled.div`\r\n    text-align: center;\r\n    height : 1em;\r\n    width : 100%;\r\n`;\r\n\r\nconst CommunityTableRow = ({ history, title, count, comments, time }) => {\r\n    return (\r\n        <CommunityTableRowBlock onClick={() => {\r\n            history.push('/Contents')\r\n        }}>\r\n            <CellBlock width={\"70%\"}><CellTextBlock>{title}</CellTextBlock></CellBlock>\r\n            <CellBlock width={\"10%\"}><CellTextBlock>{count}</CellTextBlock></CellBlock>\r\n            <CellBlock width={\"10%\"}><CellTextBlock>{comments}</CellTextBlock></CellBlock>\r\n            <CellBlock width={\"10%\"}><CellTextBlock>{time}</CellTextBlock></CellBlock>\r\n        </CommunityTableRowBlock>\r\n    );\r\n};\r\n\r\nexport default withRouter(CommunityTableRow);","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst CommunityTableHeader = styled.div`\r\n    display:flex;\r\n    flex-direction: row;\r\n    width: 100%;\r\n    height: 30px;\r\n    background-color: rgba(255, 255, 255);\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst CellBlock = styled.div`\r\n    width: ${props => props.width ? props.width : \"20%\"};\r\n    height: 50px; \r\n    text-align: center;\r\n    font-size: 15px;\r\n`;\r\n\r\nconst CommunityTableHeaderBlock = () => {\r\n    return (\r\n        <CommunityTableHeader>\r\n            <CellBlock width={'70%'}>Title</CellBlock>\r\n            <CellBlock width={\"10%\"}>View Counts</CellBlock>\r\n            <CellBlock width={\"10%\"}>Comments</CellBlock>\r\n            <CellBlock width={\"10%\"}>Post Time</CellBlock>\r\n        </CommunityTableHeader>\r\n    );\r\n};\r\n\r\nexport default CommunityTableHeaderBlock;","import React from 'react';\r\nimport styled, { css } from 'styled-components';\r\n\r\nconst CommunityTableFooter = styled.div`\r\n    display:flex;\r\n    flex-direction: row;\r\n    width: 100%;\r\n    height: 30px;\r\n    background-color: rgba(255, 255, 255);\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst CellBlock = styled.div`\r\n    width: ${props => props.width ? props.width : \"20%\"};\r\n    height: 50px; \r\n    text-align: center;\r\n    font-size: 15px;\r\n`;\r\n\r\nconst inputStyle = css`\r\n    outline: none;\r\n    border: none;\r\n    height: 25px;\r\n    width: 70%;\r\n    padding-left: 5%;\r\n    box-shadow :  0 3px 1px -2px rgba(0,0,0,0.2);\r\n    `;\r\n\r\nconst SearchInputBlock = styled.input`\r\n    ${inputStyle}\r\n`\r\n\r\nconst CommunityTableFooterBlock = () => {\r\n    return (\r\n        <CommunityTableFooter>\r\n            <CellBlock width={'70%'}><SearchInputBlock /></CellBlock>\r\n            <CellBlock width={\"30%\"}>ETCS</CellBlock>\r\n        </CommunityTableFooter>\r\n    );\r\n};\r\n\r\nexport default CommunityTableFooterBlock;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst TestBlock = () => {\r\n    return (\r\n        <>\r\n        this is Test block\r\n        </>\r\n    );\r\n}\r\nexport default TestBlock;","import React, { useState } from 'react';\r\nimport initItem from './testItems';\r\nimport { Route } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport CommunityTableRow from './CommunityTableRow';\r\nimport CommunityHeaderBlock from './CommunityHeader';\r\nimport CommunityFooterBlock from './CommunityFooter';\r\nimport TestBlock from './CommunityContent';\r\n\r\nconst CommunityLayoutBlock = styled.div`\r\n    width: 100%;\r\n    min-height: 700px;\r\n    background-color:#EDEBE9;\r\n    display: flex;\r\n    justify-content: center;\r\n`;\r\n\r\nconst CommunityMainBlock = styled.main`\r\n    width: 80%;\r\n    min-height: 720px;\r\n    background-color:lightblue;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    background-color: rgba(255, 255, 255);\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst CommunityNameBlock = styled.h1`\r\n    width: 100%;\r\n    height: 100px;\r\n    background-color: white;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    margin: 0px 0px 0px 0px;\r\n`;\r\n\r\n// const PageDivBlock = styled.div`\r\n//     display:flex;\r\n//     width: 100%;\r\n//     height: 50px;\r\n//     background-color: white;\r\n//     display: flex;\r\n//     justify-content: center;\r\n//     align-items: center;\r\n// `;\r\n\r\nconst CommunityTableBlock = styled.div`\r\n    width: 90%;\r\n    height: auto;\r\n    align-self:center;\r\n    justify-content:center;\r\n    align-items:center;\r\n    background-color: rgba(255, 255, 255);\r\n    box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.2), 0 1px 5px 0 rgba(0,0,0,0.12);\r\n`;\r\n\r\nconst CommunityLayout = () => {\r\n    const [items, setItems] = useState(initItem);\r\n    return (\r\n        <>\r\n        <Route path=\"/Community\"\r\n        exact\r\n        render={() => \r\n        <CommunityLayoutBlock>\r\n            <CommunityMainBlock>\r\n                <CommunityNameBlock>\r\n                    General Chess Discussion\r\n                </CommunityNameBlock>\r\n                <CommunityTableBlock>\r\n                    <CommunityHeaderBlock />\r\n                    {items.map(tableRow => (\r\n                        <CommunityTableRow title={tableRow.title} count={tableRow.count} comments={tableRow.comments} time={tableRow.time} />\r\n                    ))}\r\n                    <CommunityFooterBlock />\r\n                </CommunityTableBlock>\r\n            </CommunityMainBlock>\r\n        </CommunityLayoutBlock>}\r\n        />\r\n        <Route path=\"/Community/Contents\" component={TestBlock}/>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default CommunityLayout;","import React from 'react';\r\nimport CommunityLayout from '../../components/community/CommunityLayout';\r\n\r\nconst CommunityLayoutContainer = () => {\r\n    return (\r\n        <CommunityLayout />\r\n    );\r\n};\r\n\r\nexport default CommunityLayoutContainer;","import React from 'react';\r\nimport { Helmet } from 'react-helmet-async';\r\n\r\nimport HeaderContainer from '../containers/common/HeaderContainer';\r\nimport CommunityLayoutContainer from '../containers/community/CommunityLayoutContainer';\r\n\r\nconst CommunityPage = () => {\r\n\r\n    return (\r\n        <>\r\n            <Helmet>\r\n                <title>Community  Chesssup.com</title>\r\n            </Helmet>\r\n            <HeaderContainer />\r\n            <CommunityLayoutContainer />\r\n        </>\r\n    )\r\n};\r\n\r\nexport default CommunityPage;","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport { Helmet } from 'react-helmet-async';\r\n\r\nimport MainPage from './pages/MainPage';\r\nimport LoginPage from './pages/LoginPage';\r\nimport RegisterPage from './pages/RegisterPage';\r\nimport GamePage from './pages/GamePage';\r\nimport GamePlayPage from './pages/GamePlayPage';\r\nimport GamePlayCanvasPage from './pages/GamePlayCanvasPage';\r\nimport CommunityPage from './pages/CommunityPage';\r\n\r\nconst ErrorPageDiv = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-top: 200px;\r\n  font-size: 50px;\r\n`;\r\n\r\n\r\nconst App = () => {\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Chesssup.com</title>\r\n      </Helmet>\r\n      <Switch>\r\n        <Route component={MainPage} path='/' exact />\r\n        <Route component={LoginPage} path='/login' exact />\r\n        <Route component={RegisterPage} path='/register' exact />\r\n        <Route component={GamePage} path='/game' exact />\r\n        <Route component={GamePlayPage} path='/game/:id' exact />\r\n        <Route component={GamePlayCanvasPage} path='/game/canvas/:id' exact />\r\n        <Route component={CommunityPage} path='/community' exact />\r\n        <Route \r\n          render={({ location }) => (\r\n            <ErrorPageDiv>\r\n              <h1>404 Error</h1>\r\n              <p>    .</p>\r\n            </ErrorPageDiv>\r\n          )}\r\n          />\r\n      </Switch>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import { combineReducers } from 'redux';\r\nimport { all } from 'redux-saga/effects';\r\nimport game, { gameSaga } from './game';\r\nimport games, { gamesSaga } from './games';\r\nimport auth, { authSaga } from './auth';\r\nimport canvas, { canvasSaga } from './canvas';\r\nimport chat, { chatSaga } from './chat';\r\nimport record, { recordSaga }  from './record';\r\nimport create from './create';\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    auth,\r\n    game,\r\n    games,\r\n    canvas,\r\n    chat,\r\n    record,\r\n    create,\r\n})\r\n\r\n\r\nexport function* rootSaga() {\r\n    yield all([ authSaga(), gameSaga(), gamesSaga(), canvasSaga(), chatSaga(), recordSaga() ]);\r\n};\r\n\r\nexport default rootReducer;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst FixSizeBlock = styled.div`\r\n    width: 1680px;\r\n`;\r\n\r\nconst FixSize = props => {\r\n    return (\r\n        <FixSizeBlock {...props} />\r\n    )\r\n};\r\n\r\nexport default FixSize;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware } from 'redux';\r\nimport ReduxThunk from 'redux-thunk';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport { HelmetProvider } from 'react-helmet-async';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\nimport rootReducer, { rootSaga } from './modules';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { getLocalStorage, clearLocalStorage } from './lib/storage/storage';\r\nimport { checkThunk } from './modules/auth';\r\nimport FixSize from './components/common/FixSize';\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\nconst store = createStore(\r\n    rootReducer,\r\n    composeWithDevTools(applyMiddleware(ReduxThunk, sagaMiddleware))\r\n)\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\n(async() => {\r\n    const auth = getLocalStorage('auth');\r\n    if(!auth) {\r\n        return;\r\n    }\r\n\r\n    try {\r\n        const checkedAuth = await store.dispatch(checkThunk());\r\n        if(checkedAuth.username !== auth.username) {\r\n            clearLocalStorage();\r\n            //  eslint-disable-next-line\r\n            throw 'Auth mismatch';\r\n        }\r\n    } catch(e) {\r\n        console.dir('Check auth failed');\r\n    }\r\n})();\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <BrowserRouter>\r\n            <HelmetProvider>\r\n                <FixSize>\r\n                    <App />\r\n                </FixSize>\r\n            </HelmetProvider>\r\n        </BrowserRouter>\r\n    </Provider>\r\n    ,document.getElementById('root')\r\n);\r\n\r\nserviceWorker.unregister();"],"sourceRoot":""}